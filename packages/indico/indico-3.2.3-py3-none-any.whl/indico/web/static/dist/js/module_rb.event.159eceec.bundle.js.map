{"version":3,"file":"js/module_rb.event.159eceec.bundle.js","mappings":"4uBAWAA,EAAEC,UAAUC,OAAM,KAChBF,EAAE,2CAA2CG,GAAG,UAAUC,IACxD,MAAMC,EAAUL,EAAEI,EAAEE,eACdC,EAAkBF,EAAQG,QAAQ,qBAClCC,EAAWJ,EAAQK,MACnBC,EAAWJ,EAAgBK,KAAK,gBAChCC,EAAWR,EAAQS,KAAK,aAC9B,IAAIC,EAAS,CAAC,EACd,GAAIN,EAAU,CACZ,MAAMO,EAAST,EAAgBO,KAAK,UAAUL,GAC9CM,EAAS,CACPE,UAAWJ,EACXK,QAAST,EACTU,WAAY,SACZC,OAAQ,EACRC,SAAU,OACVC,IAAIC,EAAAA,EAAAA,eAAcP,EAAOQ,UACzBC,IAAIC,EAAAA,EAAAA,eAAcV,EAAOQ,UACzBG,IAAID,EAAAA,EAAAA,eAAcV,EAAOY,QAE5B,CACDjB,EAASkB,YAAY,YAAapB,GAAUqB,KAAK,OAAQC,E,qWAAM,CAAD,CAAEC,KAAM,QAAWjB,IAAjF,GApBF,G","sources":["webpack:///indico/modules/rb/event/client/js/index.js"],"sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2023 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport rbURL from 'indico-url:rb.roombooking';\n\nimport {serializeDate, serializeTime} from 'indico/utils/date';\n\n$(document).ready(() => {\n  $('#contribution-data, #session_block-data').on('change', e => {\n    const $target = $(e.currentTarget);\n    const $fieldContainer = $target.closest('.searchable-field');\n    const objectId = $target.val();\n    const $bookBtn = $fieldContainer.find('.js-book-btn');\n    const linkType = $target.data('link-type');\n    let params = {};\n    if (objectId) {\n      const values = $fieldContainer.data('values')[objectId];\n      params = {\n        link_type: linkType,\n        link_id: objectId,\n        recurrence: 'single',\n        number: 1,\n        interval: 'week',\n        sd: serializeDate(values.start_dt),\n        st: serializeTime(values.start_dt),\n        et: serializeTime(values.end_dt),\n      };\n    }\n    $bookBtn.toggleClass('disabled', !objectId).attr('href', rbURL({path: 'book', ...params}));\n  });\n});\n"],"names":["$","document","ready","on","e","$target","currentTarget","$fieldContainer","closest","objectId","val","$bookBtn","find","linkType","data","params","values","link_type","link_id","recurrence","number","interval","sd","serializeDate","start_dt","st","serializeTime","et","end_dt","toggleClass","attr","rbURL","path"],"sourceRoot":""}
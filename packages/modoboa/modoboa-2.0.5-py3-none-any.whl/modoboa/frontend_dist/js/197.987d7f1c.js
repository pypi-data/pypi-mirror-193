"use strict";(self["webpackChunkModoboa"]=self["webpackChunkModoboa"]||[]).push([[197],{1427:function(t,e,s){s.d(e,{Z:function(){return f}});var n=s(4145),a=s(4886),r=s(9592),l=function(){var t=this,e=t._self._c;return e(n.Z,[e(a.EB,[e("translate",{staticClass:"headline"},[t._v("Resources usage")])],1),e(a.ZB,t._l(t.resources,(function(s){return e("div",{key:s.name,staticClass:"mt-4"},[t._v(" "+t._s(s.label)+" ("+t._s(Math.ceil(s.usage))+"%) "),e(r.Z,{attrs:{value:s.usage,color:t.getProgressColor(s.usage)}})],1)})),0)],1)},o=[],c={props:{resources:Array},methods:{getProgressColor(t){return t<50?"primary":t<80?"warning":"error"}}},i=c,d=s(1001),u=(0,d.Z)(i,l,o,!1,null,null,null),f=u.exports},9472:function(t,e,s){s.r(e),s.d(e,{default:function(){return T}});var n=s(4562),a=s(266),r=s(4324),l=s(1713),o=s(6313),c=s(7953),i=function(){var t=this,e=t._self._c;return e("div",[e(o.Z,{attrs:{flat:""}},[e(c.qW,[e("translate",[t._v("Account")]),t._v(" "+t._s(t.account.username))],1),e(n.Z,{attrs:{color:"primary",icon:"",to:{name:"AccountEdit",params:{id:t.account.pk}}}},[e(r.Z,[t._v("mdi-circle-edit-outline")])],1)],1),e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("account-summary",{attrs:{account:t.account}}),"DomainAdmins"===t.account.role?e("domain-admin-domains",{staticClass:"mt-2",attrs:{account:t.account}}):t._e()],1),e(a.Z,{attrs:{cols:"6"}},[t.limitsConfig.params&&t.limitsConfig.params.enable_admin_limits&&"SimpleUsers"!==t.account.role&&"SuperAdmins"!==t.account.role?e("resources",{attrs:{resources:t.account.resources}}):t._e(),t.account.aliases?e("account-aliases",{staticClass:"mt-2",attrs:{account:t.account}}):t._e(),t.account.mailbox?e("account-sender-addresses",{staticClass:"mt-2",attrs:{account:t.account}}):t._e()],1)],1)],1)},d=[],u=s(4736),f=s(4145),m=s(4886),p=function(){var t=this,e=t._self._c;return e(f.Z,[e(m.EB,[e("translate",{staticClass:"headline"},[t._v("Aliases")])],1),e(m.ZB,t._l(t.account.aliases,(function(s){return e("p",{key:s},[t._v(" "+t._s(s)+" ")])})),0)],1)},g=[],_={props:{account:Object}},Z=_,h=s(1001),v=(0,h.Z)(Z,p,g,!1,null,null,null),y=v.exports,b=s(3863),A=s(7808),S=function(){var t=this,e=t._self._c;return e(f.Z,[e(m.EB,[e("translate",{staticClass:"headline"},[t._v("Sender addresses")])],1),e(m.ZB,[e(b.Z,{attrs:{headers:t.headers,items:t.addresses,"hide-default-footer":"","no-data-text":t._f("translate")("No sender address defined for this account")},scopedSlots:t._u([{key:"item.address",fn:function({item:s}){return[s.pk?e("span",[t._v(t._s(s.address))]):e(A.Z,{attrs:{label:t._f("translate")("Specify an email address")},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t.newAddress?e(n.Z,{attrs:{icon:"",color:"primary"},on:{click:t.submit}},[e(r.Z,[t._v("mdi-content-save")])],1):t._e()]},proxy:!0}],null,!0),model:{value:t.newAddress,callback:function(e){t.newAddress=e},expression:"newAddress"}})]}},{key:"item.actions",fn:function({item:s}){return[s.pk?e(n.Z,{attrs:{icon:"",color:"red",title:t._f("translate")("Remove this address")},on:{click:function(e){return t.deleteSenderAddress(s)}}},[e(r.Z,[t._v("mdi-delete-outline")])],1):t._e()]}}])}),t.hideAddBtn?t._e():e(n.Z,{attrs:{small:"",color:"primary",outlined:""},on:{click:t.addRow}},[e(r.Z,{attrs:{small:""}},[t._v("mdi-plus")]),t._v(" "),e("translate",[t._v("Add sender address")])],1)],1)],1)},$=[],C=(s(7658),s(1662)),k=s(2201);const x="senderaddresses";var w={getAll(){return k.Z.get(`${x}/`)},getAllForMailbox(t){return k.Z.get(`${x}/`,{params:{mailbox:t}})},create(t){return k.Z.post(`${x}/`,t)},delete(t){return k.Z["delete"](`${x}/${t}/`)}},j={props:{account:Object},data(){return{addresses:[],headers:[{text:this.$gettext("Address"),value:"address"},{text:"",value:"actions",align:"right",sortable:!1}],hideAddBtn:!1,newAddress:null}},methods:{addRow(){this.addresses.push({}),this.hideAddBtn=!0},fetchSenderAddresses(){w.getAllForMailbox(this.account.mailbox.pk).then((t=>{this.addresses=t.data}))},submit(){const t={address:this.newAddress,mailbox:this.account.mailbox.pk};w.create(t).then((t=>{this.fetchSenderAddresses(),this.newAddress=null,this.hideAddBtn=!1,C.$.$emit("notification",{msg:this.$gettext("Sender address added")})}))},deleteSenderAddress(t){w["delete"](t.pk).then((t=>{this.fetchSenderAddresses(),C.$.$emit("notification",{msg:this.$gettext("Sender address deleted")})}))}},mounted(){this.fetchSenderAddresses()}},B=j,O=(0,h.Z)(B,S,$,!1,null,null,null),E=O.exports,N=function(){var t=this,e=t._self._c;return e(f.Z,[e(m.EB,[e("translate",{staticClass:"headline"},[t._v("General information")])],1),e(m.ZB,[e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Creation date")])],1),e(a.Z,{attrs:{cols:"6"}},[t._v(t._s(t._f("date")(t.account.date_joined)))])],1),e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Last login date")])],1),t.account.last_login?e(a.Z,{attrs:{cols:"6"}},[t._v(t._s(t._f("date")(t.account.last_login)))]):e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Never logged-in")])],1)],1),e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Full name")])],1),e(a.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.first_name)+" "+t._s(t.account.last_name))])],1),e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Role")])],1),e(a.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.role))])],1),e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Secondary email")])],1),e(a.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.secondary_email))])],1),e(l.Z,[e(a.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Phone number")])],1),e(a.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.phone_number))])],1)],1)],1)},P=[],M={props:{account:Object}},R=M,L=(0,h.Z)(R,N,P,!1,null,null,null),D=L.exports,F=function(){var t=this,e=t._self._c;return e(f.Z,[e(m.EB,[e("translate",{staticClass:"headline"},[t._v("Administered domains")])],1),e(m.ZB,t._l(t.account.domains,(function(s){return e(l.Z,{key:s},[e(a.Z,{attrs:{cols:"12"}},[t._v(t._s(s))])],1)})),1)],1)},G=[],W={props:{account:Object}},q=W,U=(0,h.Z)(q,F,G,!1,null,null,null),z=U.exports,H=s(4726),I=s(1427),J={components:{AccountAliases:y,AccountSenderAddresses:E,AccountSummary:D,DomainAdminDomains:z,Resources:I.Z},data(){return{account:{pk:this.$route.params.id},limitsConfig:{}}},mounted(){u.Z.get(this.$route.params.id).then((t=>{this.account=t.data})),H.Z.getApplication("limits").then((t=>{this.limitsConfig=t.data}))}},K=J,Q=(0,h.Z)(K,i,d,!1,null,"6ec80c7a",null),T=Q.exports},266:function(t,e,s){s(7658),s(1884);var n=s(144),a=s(1767),r=s(5352);const l=["sm","md","lg","xl"],o=(()=>l.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),c=(()=>l.reduce(((t,e)=>(t["offset"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),i=(()=>l.reduce(((t,e)=>(t["order"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),d={col:Object.keys(o),offset:Object.keys(c),order:Object.keys(i)};function u(t,e,s){let n=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");n+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(n+=`-${s}`,n.toLowerCase()):n.toLowerCase()}}const f=new Map;e["Z"]=n.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...o,offset:{type:[String,Number],default:null},...c,order:{type:[String,Number],default:null},...i,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:n,parent:r}){let l="";for(const a in e)l+=String(e[a]);let o=f.get(l);if(!o){let t;for(t in o=[],d)d[t].forEach((s=>{const n=e[s],a=u(t,s,n);a&&o.push(a)}));const s=o.some((t=>t.startsWith("col-")));o.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),f.set(l,o)}return t(e.tag,(0,a.ZP)(s,{class:o}),n)}})},1713:function(t,e,s){s(7658),s(1884);var n=s(144),a=s(1767),r=s(5352);const l=["sm","md","lg","xl"],o=["start","end","center"];function c(t,e){return l.reduce(((s,n)=>(s[t+(0,r.jC)(n)]=e(),s)),{})}const i=t=>[...o,"baseline","stretch"].includes(t),d=c("align",(()=>({type:String,default:null,validator:i}))),u=t=>[...o,"space-between","space-around"].includes(t),f=c("justify",(()=>({type:String,default:null,validator:u}))),m=t=>[...o,"space-between","space-around","stretch"].includes(t),p=c("alignContent",(()=>({type:String,default:null,validator:m}))),g={align:Object.keys(d),justify:Object.keys(f),alignContent:Object.keys(p)},_={align:"align",justify:"justify",alignContent:"align-content"};function Z(t,e,s){let n=_[t];if(null!=s){if(e){const s=e.replace(t,"");n+=`-${s}`}return n+=`-${s}`,n.toLowerCase()}}const h=new Map;e["Z"]=n.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:i},...d,justify:{type:String,default:null,validator:u},...f,alignContent:{type:String,default:null,validator:m},...p},render(t,{props:e,data:s,children:n}){let r="";for(const a in e)r+=String(e[a]);let l=h.get(r);if(!l){let t;for(t in l=[],g)g[t].forEach((s=>{const n=e[s],a=Z(t,s,n);a&&l.push(a)}));l.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),h.set(r,l)}return t(e.tag,(0,a.ZP)(s,{staticClass:"row",class:l}),n)}})},4736:function(t,e,s){var n=s(2201);const a="accounts";e["Z"]={getAll({domain:t,role:e}){return n.Z.get(`/${a}/`,{params:{domain:t,role:e}})},get(t){return n.Z.get(`${a}/${t}/`)},getRandomPassword(){return n.Z.get(`${a}/random_password`)},validate(t){return n.Z.post(`${a}/validate/`,t)},create(t){return n.Z.post(`${a}/`,t)},patch(t,e){return n.Z.patch(`${a}/${t}/`,e)},delete(t,e){return n.Z.post(`${a}/${t}/delete/`,e)}}}}]);
//# sourceMappingURL=197.987d7f1c.js.map
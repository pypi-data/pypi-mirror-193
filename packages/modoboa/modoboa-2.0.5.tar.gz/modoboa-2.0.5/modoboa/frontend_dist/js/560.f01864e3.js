"use strict";(self["webpackChunkModoboa"]=self["webpackChunkModoboa"]||[]).push([[560],{183:function(e,t,s){s.d(t,{Z:function(){return f}});var a=s(9884),o=s(7808),i=function(){var e=this,t=e._self._c;return t("validation-observer",{ref:"observer"},[t("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Username")))]),t("email-field",{ref:"username",attrs:{"error-messages":s,placeholder:e.usernamePlaceholder,type:e.usernameInputType},on:{input:e.update},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})]}}])}),t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("First name")))]),t(o.Z,{attrs:{autocomplete:"new-password",outlined:"",dense:""},on:{input:e.update},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}}),t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Last name")))]),t(o.Z,{attrs:{autocomplete:"new-password",outlined:"",dense:""},on:{input:e.update},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}}),t("account-password-form",{ref:"passwordForm",attrs:{account:e.form},on:{input:e.update},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t(a.Z,{attrs:{label:e._f("translate")("Enabled"),dense:""},on:{input:e.update},model:{value:e.form.is_active,callback:function(t){e.$set(e.form,"is_active",t)},expression:"form.is_active"}})],1)},n=[],r=s(9950),l=s(422),u={components:{AccountPasswordForm:r.Z,EmailField:l.Z},props:["value","account"],data(){return{form:{}}},computed:{usernamePlaceholder(){return"SimpleUsers"===this.form.role?this.$gettext("Enter an email address"):this.$gettext("Enter a simple username or an email address")},usernameInputType(){return"SimpleUsers"===this.form.role?"email":"text"}},methods:{async validateForm(){return await this.$refs.observer.validate()&&await this.$refs.passwordForm.validate()},update(){console.log(this.form),this.$emit("input",this.form)}},mounted(){this.form={...this.value}}},d=u,c=s(1001),m=(0,c.Z)(d,i,n,!1,null,null,null),f=m.exports},7540:function(e,t,s){s.d(t,{Z:function(){return m}});var a=s(9884),o=s(7808),i=function(){var e=this,t=e._self._c;return t("validation-observer",{ref:"observer"},[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Quota")))]),t(a.Z,{attrs:{label:e.useDomainQuotaLabel},on:{change:e.update},model:{value:e.form.mailbox.use_domain_quota,callback:function(t){e.$set(e.form.mailbox,"use_domain_quota",t)},expression:"form.mailbox.use_domain_quota"}}),e.form.mailbox.use_domain_quota?e._e():t("validation-provider",{attrs:{rules:"",vid:"quota"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t(o.Z,{attrs:{placeholder:e._f("translate")("Ex: 10MB. Leave empty for no limit"),hint:e._f("translate")("Quota for this mailbox, can be expressed in KB, MB (default) or GB. Define a custom value or use domain's default one. Leave empty to define an unlimited value (not allowed for domain administrators)."),"persistent-hint":"",outlined:"","error-messages":s,dense:""},on:{input:e.update},model:{value:e.form.mailbox.quota,callback:function(t){e.$set(e.form.mailbox,"quota",t)},expression:"form.mailbox.quota"}})]}}],null,!1,3906384436)}),t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Daily message sending limit")))]),t(o.Z,{attrs:{placeholder:e._f("translate")("Leave empty for no limit"),hint:e._f("translate")("Number of messages this mailbox can send per day. Leave empty for no limit."),"persistent-hint":"",outlined:"",dense:""},on:{input:e.update},model:{value:e.form.mailbox.message_limit,callback:function(t){e.$set(e.form.mailbox,"message_limit",t)},expression:"form.mailbox.message_limit"}})],1)},n=[],r=s(629),l={props:["value"],data(){return{form:{mailbox:{}}}},computed:{...(0,r.Se)({getDomainByName:"identities/getDomainByName"}),domainQuota(){const e=this.form.mailbox.full_address;if(e&&-1!==e.indexOf("@")){const t=this.getDomainByName(e.split("@")[1]);if(t)return parseInt(t.default_mailbox_quota)}},useDomainQuotaLabel(){let e=this.$gettext("Use domain default value");return void 0!==this.domainQuota&&(0===this.domainQuota?e+=` (${this.$gettext("unlimited")})`:e+=` (${this.domainQuota} MB)`),e}},methods:{update(){this.$emit("input",this.form)}},mounted(){this.form={...this.value}},watch:{value:{handler(e){this.form={...e},"SimpleUsers"===this.form.role&&this.$set(this.form.mailbox,"full_address",this.form.username)},deep:!0}}},u=l,d=s(1001),c=(0,d.Z)(u,i,n,!1,null,"7dc3322c",null),m=c.exports},9950:function(e,t,s){s.d(t,{Z:function(){return v}});var a=s(3694),o=s(4562),i=s(4324),n=s(9884),r=s(7808),l=function(){var e=this,t=e._self._c;return t("div",[t("validation-observer",{ref:"observer"},[e.withPasswordCheck?t("validation-provider",{attrs:{rules:"required|validPassword",mode:"lazy"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Current password")))]),t(r.Z,{attrs:{"error-messages":s,outlined:"",type:"password",dense:""},model:{value:e.form.currentPassword,callback:function(t){e.$set(e.form,"currentPassword",t)},expression:"form.currentPassword"}})]}}],null,!1,1082127803)}):e._e(),t("div",{staticClass:"d-flex align-center"},[t(n.Z,{attrs:{label:e._f("translate")("Random password"),dense:""},on:{change:e.updatePassword},model:{value:e.form.random_password,callback:function(t){e.$set(e.form,"random_password",t)},expression:"form.random_password"}}),e.form.random_password?[t(a.Z,{staticClass:"ml-6",staticStyle:{"background-color":"#515D78"},attrs:{dense:""}},[t("span",{staticClass:"white--text mr-4"},[e._v(e._s(e.form.password))]),t(o.Z,{attrs:{small:"",color:"white",icon:"",title:e._f("translate")("Copy to clipboard")},on:{click:e.copyPassword}},[t(i.Z,[e._v("mdi-clipboard-multiple-outline")])],1)],1)]:e._e()],2),e.form.random_password?e._e():t("validation-provider",{attrs:{rules:e.passwordRules,vid:"password"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Password")))]),t(r.Z,{attrs:{value:e.value,"error-messages":s,outlined:"",type:"password",dense:""},on:{input:t=>e.$emit("input",t)}})]}}],null,!1,3678330983)}),e.form.random_password?e._e():t("validation-provider",{attrs:{rules:e.passwordConfirmationRules,vid:"confirmation"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Confirmation")))]),t(r.Z,{attrs:{"error-messages":s,outlined:"",type:"password",dense:""},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}})]}}],null,!1,1894999675)})],1)],1)},u=[],d=s(1662),c=s(4736),m={props:{value:String,withPasswordCheck:{type:Boolean,default:!1},account:{type:Object,required:!1}},data(){return{form:{}}},computed:{passwordRules(){return this.account&&this.account.pk?"":"required"},passwordConfirmationRules(){return this.value?"required|samePassword:password":""}},methods:{copyPassword(){navigator.clipboard.writeText(this.form.password).then((()=>{d.$.$emit("notification",{msg:this.$gettext("Password copied to clipboard")})}))},updatePassword(e){e?c.Z.getRandomPassword().then((e=>{this.$set(this.form,"password",e.data.password),this.$emit("input",this.form.password)})):(this.$set(this.form,"password",null),this.$set(this.form,"password_confirmation",null))},async validate(){return await this.$refs.observer.validate()}},mounted(){this.account&&(this.form.random_password=this.account.random_password,this.form.random_password&&this.updatePassword(!0))}},f=m,h=s(1001),p=(0,h.Z)(f,l,u,!1,null,null,null),v=p.exports},1728:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(3694),o=s(266),i=s(4324),n=s(1713),r=function(){var e=this,t=e._self._c;return t("validation-observer",{ref:"observer"},[t("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t(n.Z,[t(o.Z,{attrs:{cols:"7"}},[t("choice-field",{attrs:{value:e.account.role,label:e._f("translate")("Choose a role"),choices:e.accountRoles,"error-messages":s,"choices-per-line":2},on:{input:t=>e.$emit("input",t)}})],1),t(o.Z,{attrs:{cols:"5"}},[t(a.Z,{staticClass:"mt-11 ml-4 rounded-lg",attrs:{text:"",color:"primary"}},[t("h3",{staticClass:"headline"},[e._v(e._s(e.roleLabel))]),t("p",{staticClass:"mt-4"},[e._v(e._s(e.roleHelp))]),t(i.Z,{staticClass:"float-right",attrs:{color:"white",large:""}},[e._v("mdi-help-circle-outline")])],1)],1)],1)]}}])})],1)},l=[],u=s(3784),d={components:{ChoiceField:u.Z},props:["value","account"],computed:{roleLabel(){const e=this.accountRoles.find((e=>e.value===this.account.role));return void 0!==e?e.label:""},roleHelp(){const e=this.accountRoles.find((e=>e.value===this.account.role));return void 0!==e?e.help:""}},data(){return{accountRoles:[{label:this.$gettext("Domain administrator"),value:"DomainAdmins",help:this.$gettext("A user with privileges on one or more domain. He will be allowed to administer mailboxes and he can also have a mailbox.")},{label:this.$gettext("Reseller"),value:"Resellers",help:this.$gettext("help")},{label:this.$gettext("Simple user"),value:"SimpleUsers",help:this.$gettext("A user with no privileges but with a mailbox. He will be allowed to use all end-user features: webmail, calendar, contacts, filters.")},{label:this.$gettext("Super administrator"),value:"SuperAdmins",help:this.$gettext("A user with all privileges, can do anything. By default, such a user does not have a mailbox so he can't access end-user features.")}]}}},c=d,m=s(1001),f=(0,m.Z)(c,r,l,!1,null,null,null),h=f.exports},3784:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(4324),o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"text-subtitle-1 grey--text text--darken-1 mb-4",class:{"label--disabled":e.disabled}},[t("label",{staticClass:"m-label"},[e._v(e._s(e.label))])]),e._l(e.formatedChoices,(function(s,o){return t("div",{key:o,staticClass:"d-flex"},e._l(s,(function(s,o){return t("div",{key:o,staticClass:"choice rounded pa-10 mr-4 text-center flex-grow-0 mb-4",class:{"choice--disabled":e.disabled,"choice--selected":!e.disabled&&e.currentChoice===s.value},on:{click:function(t){return e.selectChoice(s.value)}}},[s.icon?t(a.Z,{staticClass:"d-block mb-2",attrs:{color:e.iconColor(s.value),"x-large":""}},[e._v(e._s(s.icon))]):e._e(),t("span",{staticClass:"grey--text text--darken-1"},[e._v(e._s(s.label))])],1)})),0)}))],2)},i=[],n=(s(7658),{props:{value:[Number,String],label:String,choices:Array,disabled:{type:Boolean,default:!1},choicesPerLine:Number},data(){return{currentChoice:null,formatedChoices:[]}},methods:{formatChoices(){if(this.choicesPerLine){let e=0;while(e<this.choices.length){const t=this.choices.slice(e,e+this.choicesPerLine);this.formatedChoices.push(t),e+=this.choicesPerLine}}else this.formatedChoices.push(this.choices)},iconColor(e){return this.disabled||e!==this.currentChoice?"":"primary"},selectChoice(e){this.disabled||(this.currentChoice=e,this.$emit("input",e))}},mounted(){this.formatChoices()},watch:{value:{handler(e){this.currentChoice=e},immediate:!0}}}),r=n,l=s(1001),u=(0,l.Z)(r,o,i,!1,null,"65541534",null),d=u.exports},422:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(5808),o=s(4525),i=s(9378),n=s(7808),r=function(){var e=this,t=e._self._c;return t("div",[t(n.Z,e._g(e._b({ref:"input",attrs:{outlined:"",dense:"",autocomplete:"new-password"},on:{input:e.update,keydown:e.onKeyDown},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},"v-text-field",e.$attrs,!1),e.$listeners)),e.showMenu?t("div",{staticClass:"menu",style:`width: ${e.width}px;`},[t(a.Z,{staticClass:"list"},e._l(e.filteredDomains,(function(s,a){return t(o.Z,{key:a,class:e.selectionIndex===a?"selected":"",on:{click:function(t){return e.selectDomain(s)}}},[t(i.V9,[e._v(e._s(s.name))])],1)})),1)],1):e._e()],1)},l=[],u=s(629),d={props:{value:String,allowAdd:{type:Boolean,default:!1}},computed:{...(0,u.Se)({domains:"identities/domains"}),filteredDomains(){return this.domains.filter((e=>e.name.startsWith(this.domainSearch)))}},data(){return{domainSearch:"",input:this.value,selectionIndex:0,showMenu:!1,width:500}},methods:{onKeyDown(e){const t=e.keyCode;40===t||34===t?(this.showMenu?this.increaseSelectionIndex():(this.domainSearch="",this.showMenu=!0),e.preventDefault()):38===t||33===t?(this.showMenu?this.decreaseSelectionIndex():(this.domainSearch="",this.showMenu=!0),e.preventDefault()):13===t||9===t?(this.filteredDomains.length>0?this.selectDomain(this.filteredDomains[this.selectionIndex]):this.allowAdd&&this.selectDomain(),e.preventDefault()):27===t&&this.filteredDomains.length>0&&(this.showMenu=!1,e.preventDefault())},increaseSelectionIndex(){this.selectionIndex>=this.filteredDomains.length-1?this.selectionIndex=0:this.selectionIndex+=1},decreaseSelectionIndex(){this.selectionIndex<=0?this.selectionIndex=this.filteredDomains.length-1:this.selectionIndex-=1},selectDomain(e){void 0!==e&&(this.input=this.input.split("@")[0]+"@"+e.name),this.showMenu=!1,this.$emit("input",this.input),this.$emit("domain-selected")},update(e){-1!==this.input.indexOf("@")?(this.domainSearch=this.input.split("@")[1],this.allowAdd?this.showMenu=this.filteredDomains.length>0:this.showMenu=!0):this.showMenu=!1,this.$emit("input",this.input)},onResize(){this.updateMinWidthProperty()},updateMinWidthProperty(){this.width=this.$refs.input.$el.clientWidth},reset(){this.input="",this.domainSearch=""}},mounted(){},updated(){this.$nextTick((()=>{this.updateMinWidthProperty()}))},watch:{value(e){this.input=e}}},c=d,m=s(1001),f=(0,m.Z)(c,r,l,!1,null,"db16b362",null),h=f.exports},266:function(e,t,s){s(7658),s(1884);var a=s(144),o=s(1767),i=s(5352);const n=["sm","md","lg","xl"],r=(()=>n.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),l=(()=>n.reduce(((e,t)=>(e["offset"+(0,i.jC)(t)]={type:[String,Number],default:null},e)),{}))(),u=(()=>n.reduce(((e,t)=>(e["order"+(0,i.jC)(t)]={type:[String,Number],default:null},e)),{}))(),d={col:Object.keys(r),offset:Object.keys(l),order:Object.keys(u)};function c(e,t,s){let a=e;if(null!=s&&!1!==s){if(t){const s=t.replace(e,"");a+=`-${s}`}return"col"!==e||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const m=new Map;t["Z"]=a.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...u,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:s,children:a,parent:i}){let n="";for(const o in t)n+=String(t[o]);let r=m.get(n);if(!r){let e;for(e in r=[],d)d[e].forEach((s=>{const a=t[s],o=c(e,s,a);o&&r.push(o)}));const s=r.some((e=>e.startsWith("col-")));r.push({col:!s||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),m.set(n,r)}return e(t.tag,(0,o.ZP)(s,{class:r}),a)}})},1713:function(e,t,s){s(7658),s(1884);var a=s(144),o=s(1767),i=s(5352);const n=["sm","md","lg","xl"],r=["start","end","center"];function l(e,t){return n.reduce(((s,a)=>(s[e+(0,i.jC)(a)]=t(),s)),{})}const u=e=>[...r,"baseline","stretch"].includes(e),d=l("align",(()=>({type:String,default:null,validator:u}))),c=e=>[...r,"space-between","space-around"].includes(e),m=l("justify",(()=>({type:String,default:null,validator:c}))),f=e=>[...r,"space-between","space-around","stretch"].includes(e),h=l("alignContent",(()=>({type:String,default:null,validator:f}))),p={align:Object.keys(d),justify:Object.keys(m),alignContent:Object.keys(h)},v={align:"align",justify:"justify",alignContent:"align-content"};function b(e,t,s){let a=v[e];if(null!=s){if(t){const s=t.replace(e,"");a+=`-${s}`}return a+=`-${s}`,a.toLowerCase()}}const w=new Map;t["Z"]=a.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:u},...d,justify:{type:String,default:null,validator:c},...m,alignContent:{type:String,default:null,validator:f},...h},render(e,{props:t,data:s,children:a}){let i="";for(const o in t)i+=String(t[o]);let n=w.get(i);if(!n){let e;for(e in n=[],p)p[e].forEach((s=>{const a=t[s],o=b(e,s,a);o&&n.push(o)}));n.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),w.set(i,n)}return e(t.tag,(0,o.ZP)(s,{staticClass:"row",class:n}),a)}})}}]);
//# sourceMappingURL=560.f01864e3.js.map
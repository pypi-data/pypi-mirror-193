import{d as C,Y as D,aY as w,aj as x,c as t,ax as m,u as e,a as u,w as n,f as p,a2 as P,a3 as N,o as k,b as A,bm as F,bn as V,bo as Y,bp as j,bq as q,D as d,br as H}from"./index-a81c9c30-993a6f39.js";import{u as O}from"./usePageTitle-5af9d279.js";import"./index-0c866963.js";import{r as R}from"./routes-cd83593a.js";const I=C({__name:"BlocksCatalogCreate",setup(X){const r=D(),a=N(),b=w("redirect"),i=x("blockTypeSlug"),f=t(()=>i.value?[i.value]:null),y=m(r.blockTypes.getBlockTypeBySlug,f),o=t(()=>y.response),h=t(()=>o.value?[o.value.id]:null),_=m(r.blockSchemas.getBlockSchemaForBlockType,h),l=t(()=>_.response);function S(s){r.blockDocuments.createBlockDocument(s).then(({id:c})=>B(c)).catch(c=>{d("Failed to create block","error"),console.error(c)})}function g(){a.back()}function B(s){if(d("Block created successfully","success"),b.value){const c=a.resolve(H(b.value));a.push(c);return}a.push(R.block(s))}const v=t(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return O(v),(s,c)=>{const T=P("p-layout-default");return e(o)?(k(),u(T,{key:0,class:"blocks-catalog-create"},{header:n(()=>[A(e(F),{"block-type":e(o)},null,8,["block-type"])]),default:n(()=>[e(o)?(k(),u(e(V),{key:0,"block-type":e(o)},{default:n(()=>[e(l)?(k(),u(e(Y),j({key:e(l).id,"block-schema":e(l)},q({submit:S,cancel:g})),null,16,["block-schema"])):p("",!0)]),_:1},8,["block-type"])):p("",!0)]),_:1})):p("",!0)}}});export{I as default};

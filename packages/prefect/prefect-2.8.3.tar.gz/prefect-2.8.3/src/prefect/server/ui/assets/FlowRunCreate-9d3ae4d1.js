import{aX as D,d as b,Y as k,aj as N,aY as O,c as m,g as x,u as a,a as F,w as d,f as I,a2 as P,a3 as T,aZ as V,o as B,b as i,a_ as J,a$ as A,b0 as U,b1 as Y,D as f}from"./index-a81c9c30-993a6f39.js";import{u as $}from"./usePageTitle-5af9d279.js";import"./index-0c866963.js";import{r as y}from"./routes-cd83593a.js";class j extends D{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const q=b({__name:"FlowRunCreate",setup(_){const t=k(),s=N("deploymentId"),n=T(),p=O("parameters",j,void 0),w=m(()=>!e.value||!p.value?{}:V.map("SchemaValuesResponse",{schema:e.value.parameterOpenApiSchema,values:p.value},"SchemaValues")),h=x(t.deployments.getDeployment,[s]),e=m(()=>h.response),R=async r=>{var l,o;try{const u=await t.deployments.createDeploymentFlowRun(s.value,r),c=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,g=!c,S=U(Y,{flowRun:u,flowRunRoute:y.flowRun,router:n,immediate:g,startTime:c});f(S,"success"),n.push(y.deployment(s.value))}catch(u){f("Something went wrong trying to create a flow run","error"),console.error(u)}},v=()=>{n.back()},C=m(()=>e.value?`Create Flow Run for Deployment: ${e.value.name}`:"Create Flow Run for Deployment");return $(C),(r,l)=>{const o=P("p-layout-default");return a(e)?(B(),F(o,{key:0},{header:d(()=>[i(a(J),{deployment:a(e)},null,8,["deployment"])]),default:d(()=>[i(a(A),{deployment:a(e),parameters:a(w),onSubmit:R,onCancel:v},null,8,["deployment","parameters"])]),_:1})):I("",!0)}}});export{q as default};

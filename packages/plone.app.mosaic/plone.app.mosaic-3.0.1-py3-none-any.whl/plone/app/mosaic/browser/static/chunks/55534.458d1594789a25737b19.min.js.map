{"version":3,"file":"chunks/55534.458d1594789a25737b19.min.js","mappings":"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","sources":["webpack://plone-mosaic/./node_modules/tinymce/plugins/emoticons/plugin.js"],"sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isNull = eq(null);\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$1 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var insertEmoticon = function (editor, ch) {\n      editor.insertContent(ch);\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var DEFAULT_ID = 'tinymce.plugins.emoticons';\n    var getEmoticonDatabase = function (editor) {\n      return editor.getParam('emoticons_database', 'emojis', 'string');\n    };\n    var getEmoticonDatabaseUrl = function (editor, pluginUrl) {\n      var database = getEmoticonDatabase(editor);\n      return editor.getParam('emoticons_database_url', pluginUrl + '/js/' + database + editor.suffix + '.js', 'string');\n    };\n    var getEmoticonDatabaseId = function (editor) {\n      return editor.getParam('emoticons_database_id', DEFAULT_ID, 'string');\n    };\n    var getAppendedEmoticons = function (editor) {\n      return editor.getParam('emoticons_append', {}, 'object');\n    };\n    var getEmotionsImageUrl = function (editor) {\n      return editor.getParam('emoticons_images_url', 'https://twemoji.maxcdn.com/v/13.0.1/72x72/', 'string');\n    };\n\n    var ALL_CATEGORY = 'All';\n    var categoryNameMap = {\n      symbols: 'Symbols',\n      people: 'People',\n      animals_and_nature: 'Animals and Nature',\n      food_and_drink: 'Food and Drink',\n      activity: 'Activity',\n      travel_and_places: 'Travel and Places',\n      objects: 'Objects',\n      flags: 'Flags',\n      user: 'User Defined'\n    };\n    var translateCategory = function (categories, name) {\n      return has(categories, name) ? categories[name] : name;\n    };\n    var getUserDefinedEmoticons = function (editor) {\n      var userDefinedEmoticons = getAppendedEmoticons(editor);\n      return map(userDefinedEmoticons, function (value) {\n        return __assign({\n          keywords: [],\n          category: 'user'\n        }, value);\n      });\n    };\n    var initDatabase = function (editor, databaseUrl, databaseId) {\n      var categories = value();\n      var all = value();\n      var emojiImagesUrl = getEmotionsImageUrl(editor);\n      var getEmoji = function (lib) {\n        if (startsWith(lib.char, '<img')) {\n          return lib.char.replace(/src=\"([^\"]+)\"/, function (match, url) {\n            return 'src=\"' + emojiImagesUrl + url + '\"';\n          });\n        } else {\n          return lib.char;\n        }\n      };\n      var processEmojis = function (emojis) {\n        var cats = {};\n        var everything = [];\n        each(emojis, function (lib, title) {\n          var entry = {\n            title: title,\n            keywords: lib.keywords,\n            char: getEmoji(lib),\n            category: translateCategory(categoryNameMap, lib.category)\n          };\n          var current = cats[entry.category] !== undefined ? cats[entry.category] : [];\n          cats[entry.category] = current.concat([entry]);\n          everything.push(entry);\n        });\n        categories.set(cats);\n        all.set(everything);\n      };\n      editor.on('init', function () {\n        global$2.load(databaseId, databaseUrl).then(function (emojis) {\n          var userEmojis = getUserDefinedEmoticons(editor);\n          processEmojis(merge(emojis, userEmojis));\n        }, function (err) {\n          console.log('Failed to load emoticons: ' + err);\n          categories.set({});\n          all.set([]);\n        });\n      });\n      var listCategory = function (category) {\n        if (category === ALL_CATEGORY) {\n          return listAll();\n        }\n        return categories.get().bind(function (cats) {\n          return Optional.from(cats[category]);\n        }).getOr([]);\n      };\n      var listAll = function () {\n        return all.get().getOr([]);\n      };\n      var listCategories = function () {\n        return [ALL_CATEGORY].concat(keys(categories.get().getOr({})));\n      };\n      var waitForLoad = function () {\n        if (hasLoaded()) {\n          return global.resolve(true);\n        } else {\n          return new global(function (resolve, reject) {\n            var numRetries = 15;\n            var interval = global$1.setInterval(function () {\n              if (hasLoaded()) {\n                global$1.clearInterval(interval);\n                resolve(true);\n              } else {\n                numRetries--;\n                if (numRetries < 0) {\n                  console.log('Could not load emojis from url: ' + databaseUrl);\n                  global$1.clearInterval(interval);\n                  reject(false);\n                }\n              }\n            }, 100);\n          });\n        }\n      };\n      var hasLoaded = function () {\n        return categories.isSet() && all.isSet();\n      };\n      return {\n        listCategories: listCategories,\n        hasLoaded: hasLoaded,\n        waitForLoad: waitForLoad,\n        listAll: listAll,\n        listCategory: listCategory\n      };\n    };\n\n    var emojiMatches = function (emoji, lowerCasePattern) {\n      return contains(emoji.title.toLowerCase(), lowerCasePattern) || exists(emoji.keywords, function (k) {\n        return contains(k.toLowerCase(), lowerCasePattern);\n      });\n    };\n    var emojisFrom = function (list, pattern, maxResults) {\n      var matches = [];\n      var lowerCasePattern = pattern.toLowerCase();\n      var reachedLimit = maxResults.fold(function () {\n        return never;\n      }, function (max) {\n        return function (size) {\n          return size >= max;\n        };\n      });\n      for (var i = 0; i < list.length; i++) {\n        if (pattern.length === 0 || emojiMatches(list[i], lowerCasePattern)) {\n          matches.push({\n            value: list[i].char,\n            text: list[i].title,\n            icon: list[i].char\n          });\n          if (reachedLimit(matches.length)) {\n            break;\n          }\n        }\n      }\n      return matches;\n    };\n\n    var patternName = 'pattern';\n    var open = function (editor, database) {\n      var initialState = {\n        pattern: '',\n        results: emojisFrom(database.listAll(), '', Optional.some(300))\n      };\n      var currentTab = Cell(ALL_CATEGORY);\n      var scan = function (dialogApi) {\n        var dialogData = dialogApi.getData();\n        var category = currentTab.get();\n        var candidates = database.listCategory(category);\n        var results = emojisFrom(candidates, dialogData[patternName], category === ALL_CATEGORY ? Optional.some(300) : Optional.none());\n        dialogApi.setData({ results: results });\n      };\n      var updateFilter = last(function (dialogApi) {\n        scan(dialogApi);\n      }, 200);\n      var searchField = {\n        label: 'Search',\n        type: 'input',\n        name: patternName\n      };\n      var resultsField = {\n        type: 'collection',\n        name: 'results'\n      };\n      var getInitialState = function () {\n        var body = {\n          type: 'tabpanel',\n          tabs: map$1(database.listCategories(), function (cat) {\n            return {\n              title: cat,\n              name: cat,\n              items: [\n                searchField,\n                resultsField\n              ]\n            };\n          })\n        };\n        return {\n          title: 'Emoticons',\n          size: 'normal',\n          body: body,\n          initialData: initialState,\n          onTabChange: function (dialogApi, details) {\n            currentTab.set(details.newTabName);\n            updateFilter.throttle(dialogApi);\n          },\n          onChange: updateFilter.throttle,\n          onAction: function (dialogApi, actionData) {\n            if (actionData.name === 'results') {\n              insertEmoticon(editor, actionData.value);\n              dialogApi.close();\n            }\n          },\n          buttons: [{\n              type: 'cancel',\n              text: 'Close',\n              primary: true\n            }]\n        };\n      };\n      var dialogApi = editor.windowManager.open(getInitialState());\n      dialogApi.focus(patternName);\n      if (!database.hasLoaded()) {\n        dialogApi.block('Loading emoticons...');\n        database.waitForLoad().then(function () {\n          dialogApi.redial(getInitialState());\n          updateFilter.throttle(dialogApi);\n          dialogApi.focus(patternName);\n          dialogApi.unblock();\n        }).catch(function (_err) {\n          dialogApi.redial({\n            title: 'Emoticons',\n            body: {\n              type: 'panel',\n              items: [{\n                  type: 'alertbanner',\n                  level: 'error',\n                  icon: 'warning',\n                  text: '<p>Could not load emoticons</p>'\n                }]\n            },\n            buttons: [{\n                type: 'cancel',\n                text: 'Close',\n                primary: true\n              }],\n            initialData: {\n              pattern: '',\n              results: []\n            }\n          });\n          dialogApi.focus(patternName);\n          dialogApi.unblock();\n        });\n      }\n    };\n\n    var register$1 = function (editor, database) {\n      editor.addCommand('mceEmoticons', function () {\n        return open(editor, database);\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addAttributeFilter('data-emoticon', function (nodes) {\n          each$1(nodes, function (node) {\n            node.attr('data-mce-resize', 'false');\n            node.attr('data-mce-placeholder', '1');\n          });\n        });\n      });\n    };\n\n    var init = function (editor, database) {\n      editor.ui.registry.addAutocompleter('emoticons', {\n        ch: ':',\n        columns: 'auto',\n        minChars: 2,\n        fetch: function (pattern, maxResults) {\n          return database.waitForLoad().then(function () {\n            var candidates = database.listAll();\n            return emojisFrom(candidates, pattern, Optional.some(maxResults));\n          });\n        },\n        onAction: function (autocompleteApi, rng, value) {\n          editor.selection.setRng(rng);\n          editor.insertContent(value);\n          autocompleteApi.hide();\n        }\n      });\n    };\n\n    var register = function (editor) {\n      var onAction = function () {\n        return editor.execCommand('mceEmoticons');\n      };\n      editor.ui.registry.addButton('emoticons', {\n        tooltip: 'Emoticons',\n        icon: 'emoji',\n        onAction: onAction\n      });\n      editor.ui.registry.addMenuItem('emoticons', {\n        text: 'Emoticons...',\n        icon: 'emoji',\n        onAction: onAction\n      });\n    };\n\n    function Plugin () {\n      global$3.add('emoticons', function (editor, pluginUrl) {\n        var databaseUrl = getEmoticonDatabaseUrl(editor, pluginUrl);\n        var databaseId = getEmoticonDatabaseId(editor);\n        var database = initDatabase(editor, databaseUrl, databaseId);\n        register$1(editor, database);\n        register(editor);\n        init(editor, database);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"names":["t","call","id","merger","global$3","tinymce","util","Tools","resolve","isNull","a","noop","constant","value","identity","x","never","always","none","NONE","fold","n","_s","isSome","isNone","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","f","s","Optional","from","map$1","xs","len","length","r","Array","i","Cell","initial","get","set","v","__assign","Object","assign","arguments","p","prototype","hasOwnProperty","apply","this","keys","obj","props","k","tupleMap","tuple","has","key","merge","old","nu","objects","_i","ret","j","curObject","subject","doRevoke","revoke","clear","isSet","singleton","on","contains","str","substr","indexOf","global$2","global$1","global","getEmoticonDatabaseUrl","editor","pluginUrl","database","getParam","getEmoticonDatabase","suffix","getEmoticonDatabaseId","ALL_CATEGORY","categoryNameMap","symbols","people","animals_and_nature","food_and_drink","activity","travel_and_places","flags","user","translateCategory","categories","name","getUserDefinedEmoticons","userDefinedEmoticons","getAppendedEmoticons","keywords","category","initDatabase","databaseUrl","databaseId","all","emojiImagesUrl","getEmotionsImageUrl","getEmoji","lib","start","checkRange","char","replace","match","url","load","then","emojis","userEmojis","cats","everything","title","entry","current","concat","push","processEmojis","err","console","log","listAll","hasLoaded","listCategories","waitForLoad","reject","numRetries","interval","setInterval","clearInterval","listCategory","emojiMatches","emoji","lowerCasePattern","toLowerCase","pred","emojisFrom","list","pattern","maxResults","matches","reachedLimit","max","size","text","icon","patternName","open","fn","rate","timer","cancel","initialState","results","currentTab","updateFilter","dialogApi","dialogData","getData","candidates","setData","scan","clearTimeout","throttle","args","setTimeout","searchField","label","type","resultsField","getInitialState","body","tabs","cat","items","initialData","onTabChange","details","newTabName","onChange","onAction","actionData","ch","insertContent","insertEmoticon","close","buttons","primary","windowManager","focus","block","redial","unblock","catch","_err","level","register$1","addCommand","setup","parser","addAttributeFilter","nodes","each$1","node","attr","init","ui","registry","addAutocompleter","columns","minChars","fetch","autocompleteApi","rng","selection","setRng","hide","register","execCommand","addButton","tooltip","addMenuItem","add"],"sourceRoot":""}
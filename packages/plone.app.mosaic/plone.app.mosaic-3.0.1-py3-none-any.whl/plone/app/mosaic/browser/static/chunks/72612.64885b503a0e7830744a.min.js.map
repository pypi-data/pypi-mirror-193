{"version":3,"file":"chunks/72612.64885b503a0e7830744a.min.js","mappings":"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","sources":["webpack://plone-mosaic/./node_modules/tinymce/plugins/autosave/plugin.js"],"sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isUndefined = eq(undefined);\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var fireRestoreDraft = function (editor) {\n      return editor.fire('RestoreDraft');\n    };\n    var fireStoreDraft = function (editor) {\n      return editor.fire('StoreDraft');\n    };\n    var fireRemoveDraft = function (editor) {\n      return editor.fire('RemoveDraft');\n    };\n\n    var parse = function (timeString, defaultTime) {\n      var multiples = {\n        s: 1000,\n        m: 60000\n      };\n      var toParse = timeString || defaultTime;\n      var parsedTime = /^(\\d+)([ms]?)$/.exec('' + toParse);\n      return (parsedTime[2] ? multiples[parsedTime[2]] : 1) * parseInt(toParse, 10);\n    };\n\n    var shouldAskBeforeUnload = function (editor) {\n      return editor.getParam('autosave_ask_before_unload', true);\n    };\n    var getAutoSavePrefix = function (editor) {\n      var location = document.location;\n      return editor.getParam('autosave_prefix', 'tinymce-autosave-{path}{query}{hash}-{id}-').replace(/{path}/g, location.pathname).replace(/{query}/g, location.search).replace(/{hash}/g, location.hash).replace(/{id}/g, editor.id);\n    };\n    var shouldRestoreWhenEmpty = function (editor) {\n      return editor.getParam('autosave_restore_when_empty', false);\n    };\n    var getAutoSaveInterval = function (editor) {\n      return parse(editor.getParam('autosave_interval'), '30s');\n    };\n    var getAutoSaveRetention = function (editor) {\n      return parse(editor.getParam('autosave_retention'), '20m');\n    };\n\n    var isEmpty = function (editor, html) {\n      if (isUndefined(html)) {\n        return editor.dom.isEmpty(editor.getBody());\n      } else {\n        var trimmedHtml = global$1.trim(html);\n        if (trimmedHtml === '') {\n          return true;\n        } else {\n          var fragment = new DOMParser().parseFromString(trimmedHtml, 'text/html');\n          return editor.dom.isEmpty(fragment);\n        }\n      }\n    };\n    var hasDraft = function (editor) {\n      var time = parseInt(global$2.getItem(getAutoSavePrefix(editor) + 'time'), 10) || 0;\n      if (new Date().getTime() - time > getAutoSaveRetention(editor)) {\n        removeDraft(editor, false);\n        return false;\n      }\n      return true;\n    };\n    var removeDraft = function (editor, fire) {\n      var prefix = getAutoSavePrefix(editor);\n      global$2.removeItem(prefix + 'draft');\n      global$2.removeItem(prefix + 'time');\n      if (fire !== false) {\n        fireRemoveDraft(editor);\n      }\n    };\n    var storeDraft = function (editor) {\n      var prefix = getAutoSavePrefix(editor);\n      if (!isEmpty(editor) && editor.isDirty()) {\n        global$2.setItem(prefix + 'draft', editor.getContent({\n          format: 'raw',\n          no_events: true\n        }));\n        global$2.setItem(prefix + 'time', new Date().getTime().toString());\n        fireStoreDraft(editor);\n      }\n    };\n    var restoreDraft = function (editor) {\n      var prefix = getAutoSavePrefix(editor);\n      if (hasDraft(editor)) {\n        editor.setContent(global$2.getItem(prefix + 'draft'), { format: 'raw' });\n        fireRestoreDraft(editor);\n      }\n    };\n    var startStoreDraft = function (editor) {\n      var interval = getAutoSaveInterval(editor);\n      global$3.setEditorInterval(editor, function () {\n        storeDraft(editor);\n      }, interval);\n    };\n    var restoreLastDraft = function (editor) {\n      editor.undoManager.transact(function () {\n        restoreDraft(editor);\n        removeDraft(editor);\n      });\n      editor.focus();\n    };\n\n    var get = function (editor) {\n      return {\n        hasDraft: function () {\n          return hasDraft(editor);\n        },\n        storeDraft: function () {\n          return storeDraft(editor);\n        },\n        restoreDraft: function () {\n          return restoreDraft(editor);\n        },\n        removeDraft: function (fire) {\n          return removeDraft(editor, fire);\n        },\n        isEmpty: function (html) {\n          return isEmpty(editor, html);\n        }\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var setup = function (editor) {\n      editor.editorManager.on('BeforeUnload', function (e) {\n        var msg;\n        global$1.each(global.get(), function (editor) {\n          if (editor.plugins.autosave) {\n            editor.plugins.autosave.storeDraft();\n          }\n          if (!msg && editor.isDirty() && shouldAskBeforeUnload(editor)) {\n            msg = editor.translate('You have unsaved changes are you sure you want to navigate away?');\n          }\n        });\n        if (msg) {\n          e.preventDefault();\n          e.returnValue = msg;\n        }\n      });\n    };\n\n    var makeSetupHandler = function (editor) {\n      return function (api) {\n        api.setDisabled(!hasDraft(editor));\n        var editorEventCallback = function () {\n          return api.setDisabled(!hasDraft(editor));\n        };\n        editor.on('StoreDraft RestoreDraft RemoveDraft', editorEventCallback);\n        return function () {\n          return editor.off('StoreDraft RestoreDraft RemoveDraft', editorEventCallback);\n        };\n      };\n    };\n    var register = function (editor) {\n      startStoreDraft(editor);\n      editor.ui.registry.addButton('restoredraft', {\n        tooltip: 'Restore last draft',\n        icon: 'restore-draft',\n        onAction: function () {\n          restoreLastDraft(editor);\n        },\n        onSetup: makeSetupHandler(editor)\n      });\n      editor.ui.registry.addMenuItem('restoredraft', {\n        text: 'Restore last draft',\n        icon: 'restore-draft',\n        onAction: function () {\n          restoreLastDraft(editor);\n        },\n        onSetup: makeSetupHandler(editor)\n      });\n    };\n\n    function Plugin () {\n      global$4.add('autosave', function (editor) {\n        setup(editor);\n        register(editor);\n        editor.on('init', function () {\n          if (shouldRestoreWhenEmpty(editor) && editor.dom.isEmpty(editor.getBody())) {\n            restoreDraft(editor);\n          }\n        });\n        return get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"names":["t","global$4","tinymce","util","Tools","resolve","isUndefined","undefined","a","global$3","global$2","global$1","parse","timeString","defaultTime","toParse","parsedTime","exec","s","m","parseInt","getAutoSavePrefix","editor","location","document","getParam","replace","pathname","search","hash","id","shouldRestoreWhenEmpty","isEmpty","html","dom","getBody","trimmedHtml","trim","fragment","DOMParser","parseFromString","hasDraft","time","getItem","Date","getTime","getAutoSaveRetention","removeDraft","fire","prefix","removeItem","fireRemoveDraft","storeDraft","isDirty","setItem","getContent","format","no_events","toString","fireStoreDraft","restoreDraft","setContent","fireRestoreDraft","startStoreDraft","interval","getAutoSaveInterval","setEditorInterval","restoreLastDraft","undoManager","transact","focus","get","global","setup","editorManager","on","e","msg","each","plugins","autosave","shouldAskBeforeUnload","translate","preventDefault","returnValue","makeSetupHandler","api","setDisabled","editorEventCallback","off","register","ui","registry","addButton","tooltip","icon","onAction","onSetup","addMenuItem","text","add"],"sourceRoot":""}
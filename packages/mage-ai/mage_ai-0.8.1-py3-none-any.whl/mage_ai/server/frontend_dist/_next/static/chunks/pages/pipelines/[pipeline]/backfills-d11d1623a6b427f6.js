(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return s},Vx:function(){return p},eI:function(){return d},gU:function(){return b},tL:function(){return f},vJ:function(){return m}});var r,o,i=t(82394),c=t(92083),l=t.n(c);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,o=n.started_at,c=n.status,u=null;o&&r&&(u=l()(r).valueOf()-l()(o).valueOf());return a(a({},e),{},(0,i.Z)({},t,{runtime:u,status:c}))}),{})}function d(e){if(!e)return null;var n=new Date(l()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function p(e){return d(e).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(o||(o={}));var f=(r={},(0,i.Z)(r,o.DAY,86400),(0,i.Z)(r,o.HOUR,3600),(0,i.Z)(r,o.MINUTE,60),(0,i.Z)(r,o.SECOND,1),r);function b(e){var n=o.SECOND,t=e;return e%86400===0?(t/=86400,n=o.DAY):e%3600===0?(t/=3600,n=o.HOUR):e%60===0&&(t/=60,n=o.MINUTE),{time:t,unit:n}}function m(e,n){return e*f[n]}},17903:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(82394),o=t(12691),i=t.n(o),c=t(82684),l=t(67971),u=t(10919),a=t(86673),s=t(19711),d=t(46261),p=t(9518),f=t(23831),b=t(49125),m=p.default.table.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1wzfyed-0"})(["contain:size;width:100%;",""],(function(e){return(e.columnBorders||e.borderCollapseSeparate)&&"\n    border-collapse: separate;\n  "})),h=p.default.tr.withConfig({displayName:"indexstyle__TableRowStyle",componentId:"sc-1wzfyed-1"})(["",""],(function(e){return!e.noHover&&"\n    &:hover {\n      background: ".concat((e.theme.interactive||f.Z.interactive).rowHoverBackground,";\n      cursor: pointer;\n    }\n  ")})),v=(0,p.css)(["text-overflow:ellipsis;white-space:nowrap;"," "," "," "," "," ",""],(function(e){return!e.alignTop&&"\n    vertical-align: middle;\n  "}),(function(e){return e.alignTop&&"\n    vertical-align: top;\n  "}),(function(e){return!e.noBorder&&"\n    border-bottom: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.compact&&"\n    padding: ".concat(b.iI/2,"px ").concat(b.iI,"px;\n  ")}),(function(e){return!e.compact&&"\n    padding: ".concat(b.iI,"px ").concat(2*b.iI,"px;\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,";\n  ")})),g=p.default.th.withConfig({displayName:"indexstyle__TableHeadStyle",componentId:"sc-1wzfyed-2"})([""," "," "," ",""],v,(function(e){return e.columnBorders&&"\n    border: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n    border-right: none;\n  ")}),(function(e){return e.columnBorders&&e.last&&"\n    border-right: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.sticky&&"\n    background-color: ".concat((e.theme||f.Z).background.panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||f.Z.borders).medium,";\n    z-index: 1;\n    position: sticky;\n    top: 0;\n\n    &:first-child {\n      left: 0;\n      z-index: 2;\n    }\n  ")})),O=p.default.td.withConfig({displayName:"indexstyle__TableDataStyle",componentId:"sc-1wzfyed-3"})([""," "," "," "," "," ",""],v,(function(e){return e.columnBorders&&"\n    border-left: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.columnBorders&&e.last&&"\n    border-right: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.stickyFirstColumn&&"\n    background-color: ".concat((e.theme||f.Z).background.panel,";\n    z-index: 1;\n    position: sticky;\n    left: 0;\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||f.Z.interactive).activeBorder,";\n  ")}),(function(e){return e.wrapColumns&&"\n    white-space: break-spaces;\n  "})),y=t(28598);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e){var n=e.alignTop,t=e.borderCollapseSeparate,r=e.buildLinkProps,o=e.columnBorders,p=e.columnFlex,f=e.columnMaxWidth,b=e.columns,v=void 0===b?[]:b,k=e.compact,j=e.isSelectedRow,x=e.noBorder,P=e.noHeader,Z=e.onClickRow,C=e.rows,_=e.stickyFirstColumn,E=e.stickyHeader,D=e.uuid,S=e.wrapColumns,I=(0,c.useMemo)((function(){return p.reduce((function(e,n){return e+(n||0)}),0)}),p),N=(0,c.useCallback)((function(e){if(p[e]){var n=Math.round(p[e]/I*100);return"".concat(n,"%")}return null}),[]),B=(0,c.useMemo)((function(){return null===C||void 0===C?void 0:C.map((function(e,t){var l=null===r||void 0===r?void 0:r(t),a=e.map((function(r,i){return(0,y.jsx)(O,{alignTop:n,columnBorders:o,compact:k,last:i===e.length-1,maxWidth:null===f||void 0===f?void 0:f(i),noBorder:x,selected:null===j||void 0===j?void 0:j(t),stickyFirstColumn:_&&0===i,width:N(i),wrapColumns:S,children:r},"".concat(D,"-row-").concat(t,"-cell-").concat(i))})),s=(0,y.jsx)(h,{noHover:!(l||Z),onClick:Z?function(){return Z(t)}:null,children:a},"".concat(D,"-row-").concat(t));return l?(0,c.createElement)(i(),w(w({},l),{},{key:"".concat(D,"-row-link-").concat(t),passHref:!0}),(0,y.jsx)(u.Z,{fullWidth:!0,noHoverUnderline:!0,noOutline:!0,style:{display:"table-row-group"},verticalAlignContent:!0,children:s})):s}))}),[n,r,N,f,v,k,j,x,Z,C]);return(0,y.jsxs)(m,{borderCollapseSeparate:t,columnBorders:o,children:[(null===v||void 0===v?void 0:v.length)>=1&&!P&&(0,y.jsx)(h,{noHover:!0,children:v.map((function(e,n){return(0,y.jsx)(g,{columnBorders:o,compact:k,last:n===v.length-1,noBorder:x,sticky:E,children:(0,y.jsxs)(l.Z,{alignItems:"center",children:[(0,y.jsx)(s.ZP,{bold:!0,leftAligned:!0,monospace:!0,muted:!0,children:e.label?e.label():e.uuid}),e.tooltipMessage&&(0,y.jsx)(a.Z,{ml:"4px",children:(0,y.jsx)(d.Z,{appearBefore:!0,label:(0,y.jsx)(s.ZP,{leftAligned:!0,children:e.tooltipMessage}),lightBackground:!0,primary:!0})})]})},"".concat(D,"-col-").concat(e.uuid,"-").concat(n))}))}),B]})}},43526:function(e,n,t){"use strict";t.d(n,{IB:function(){return u},VV:function(){return i},_7:function(){return c},rn:function(){return l}});var r,o=t(66050),i="datetime",c="code",l=o.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(r||(r={}));var u=[r.SECOND,r.MINUTE,r.HOUR,r.DAY,r.WEEK,r.MONTH,r.YEAR,r.CUSTOM]},66050:function(e,n,t){"use strict";var r;t.d(n,{V:function(){return r}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running"}(r||(r={}))},30206:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var r=t(77837),o=t(75582),i=t(38860),c=t.n(i),l=t(82684),u=t(83455),a=t(34376),s=t(12691),d=t.n(s),p=t(43526),f=t(60328),b=t(10919),m=t(17903),h=t(19711),v=t(10503),g=t(49125),O=t(19395),y=t(28598);var k=function(e){var n=e.models,t=e.onClickRow,r=e.pipeline,o=e.selectedRow,i=null===r||void 0===r?void 0:r.uuid;return(0,y.jsx)(m.Z,{columnFlex:[null,1,null,null,null,1,1,null],columns:[{uuid:"Status"},{uuid:"Name"},{uuid:"Type"},{uuid:"Runs"},{uuid:"Backfill"},{uuid:"Started at"},{uuid:"Completed at"},{label:function(){return""},uuid:"edit"}],isSelectedRow:function(e){return n[e].id===(null===o||void 0===o?void 0:o.id)},onClickRow:function(e){return t(n[e])},rows:n.map((function(e){var n=e.block_uuid,t=e.completed_at,r=e.end_datetime,o=e.id,c=e.name,l=e.start_datetime,u=e.started_at,a=e.status;return[(0,y.jsx)(h.ZP,{default:!0,monospace:!0,children:a||"inactive"},"status"),(0,y.jsx)(d(),{as:"/pipelines/".concat(i,"/backfills/").concat(o),href:"/pipelines/[pipeline]/backfills/[...slug]",passHref:!0,children:(0,y.jsx)(b.Z,{bold:!0,sameColorAsText:!0,children:c})},"name"),(0,y.jsx)(h.ZP,{default:!0,monospace:!0,children:n?p._7:p.VV},"type"),(0,y.jsx)(h.ZP,{default:!0,monospace:!0,children:0},"runs"),(0,y.jsxs)(h.ZP,{default:!0,monospace:!0,children:[l&&r&&(0,y.jsxs)(y.Fragment,{children:[(0,O.Vx)(l),"\xa0-\xa0",(0,O.Vx)(r)]}),!(l&&r)&&"-"]},"backfill"),(0,y.jsx)(h.ZP,{default:!0,monospace:!0,children:u?(0,O.Vx)(u):"-"},"started_at"),(0,y.jsx)(h.ZP,{default:!0,monospace:!0,children:t?(0,O.Vx)(t):"-"},"completed_at"),(0,y.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,linkProps:{as:"/pipelines/".concat(i,"/backfills/").concat(o,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},title:"Edit",children:(0,y.jsx)(v.I8,{default:!0,size:2*g.iI})})]})),uuid:"pipeline-runs"})},w=t(11135),j=t(76623),x=t(41788),P=t(86673),Z=t(82531),C=t(59920),_=t(33766),E=t(96510),D=t(59e3),S=t(90211);function I(e){var n=e.pipeline,t=(0,a.useRouter)(),r=n.uuid,i=Z.ZP.backfills.list({_limit:20,_offset:0,pipeline_uuid:r},{refreshInterval:6e4}),c=i.data,s=(i.mutate,(0,l.useMemo)((function(){return(null===c||void 0===c?void 0:c.backfills)||[]}),[c])),d=(0,D.iV)(),p=(0,l.useState)(null),f=p[0],b=p[1];(0,l.useEffect)((function(){null!==d&&void 0!==d&&d.backfill_id?b(null===s||void 0===s?void 0:s.find((function(e){return e.id===Number(d.backfill_id)}))):f&&b(null)}),[s,d,f]);var m=(0,l.useMemo)((function(){var e="/pipelines/".concat(r,"/backfills"),n=[{label:function(){return"Backfills"},linkProps:f?{as:e,href:"/pipelines/[pipeline]/backfills"}:null}];return f&&n.push({label:function(){return f.name}}),n}),[f]),O=(0,u.Db)(Z.ZP.backfills.pipelines.useCreate(r),{onSuccess:function(e){return(0,E.wD)(e,{callback:function(e){var n=e.backfill.id;t.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(r,"/backfills/").concat(n,"/edit"))},onErrorCallback:function(e){var n=e.error,t=(n.errors,n.message);alert(t)}})}}),x=(0,o.Z)(O,2),I=x[0],N=x[1].isLoading;return(0,y.jsxs)(j.Z,{breadcrumbs:m,pageName:C.M.BACKFILLS,pipeline:n,title:function(e){var n=e.name;return"".concat(n," backfills")},uuid:"".concat(C.M.BACKFILLS,"_").concat(r),children:[(0,y.jsx)(P.Z,{p:g.cd,children:(0,y.jsx)(w.ZP,{beforeElement:(0,y.jsx)(v.mm,{size:2.5*g.iI}),blackBorder:!0,inline:!0,loading:N,noHoverUnderline:!0,onClick:function(){return I({backfill:{name:(0,S.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/Backfills/add_new_backfill",children:"Create new backfill"})}),s&&0===s.length&&(0,y.jsx)(P.Z,{p:g.cd,children:(0,y.jsx)(h.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No backfills"})}),(null===s||void 0===s?void 0:s.length)>=1&&(0,y.jsx)(k,{models:s,onClickRow:function(e){var n=e.id;return(0,_.u)({backfill_id:n})},pipeline:n,selectedRow:f})]})}I.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var N=(0,x.Z)(I)},33766:function(e,n,t){"use strict";t.d(n,{u:function(){return s}});var r=t(75582),o=t(82394),i=t(34376),c=t.n(i),l=t(59e3);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.replaceParams,i=t.pushHistory,u=o?{}:(0,l.iV)();n=window.location.pathname;var s=i?c().push:c().replace,d=a(a({},u),e);Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];"undefined"!==typeof o&&null!==o||delete d[t]}));var p=(0,l.uM)(d);p.length>=1&&(p="?".concat(p));var f="".concat(n.split("?")[0]).concat(p);return s(c().router.pathname,f,{shallow:!0})}},37459:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills",function(){return t(30206)}])}},function(e){e.O(0,[3850,2083,9767,6579,434,1830,6623,9774,2888,179],(function(){return n=37459,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
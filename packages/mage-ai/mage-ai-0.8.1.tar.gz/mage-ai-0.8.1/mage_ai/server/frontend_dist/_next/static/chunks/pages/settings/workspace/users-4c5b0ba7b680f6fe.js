(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{17903:function(e,n,r){"use strict";r.d(n,{Z:function(){return x}});var t=r(82394),o=r(12691),c=r.n(o),i=r(82684),u=r(67971),l=r(10919),s=r(86673),a=r(19711),d=r(46261),p=r(9518),f=r(23831),b=r(49125),m=p.default.table.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1wzfyed-0"})(["contain:size;width:100%;",""],(function(e){return(e.columnBorders||e.borderCollapseSeparate)&&"\n    border-collapse: separate;\n  "})),h=p.default.tr.withConfig({displayName:"indexstyle__TableRowStyle",componentId:"sc-1wzfyed-1"})(["",""],(function(e){return!e.noHover&&"\n    &:hover {\n      background: ".concat((e.theme.interactive||f.Z.interactive).rowHoverBackground,";\n      cursor: pointer;\n    }\n  ")})),v=(0,p.css)(["text-overflow:ellipsis;white-space:nowrap;"," "," "," "," "," ",""],(function(e){return!e.alignTop&&"\n    vertical-align: middle;\n  "}),(function(e){return e.alignTop&&"\n    vertical-align: top;\n  "}),(function(e){return!e.noBorder&&"\n    border-bottom: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.compact&&"\n    padding: ".concat(b.iI/2,"px ").concat(b.iI,"px;\n  ")}),(function(e){return!e.compact&&"\n    padding: ".concat(b.iI,"px ").concat(2*b.iI,"px;\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,";\n  ")})),w=p.default.th.withConfig({displayName:"indexstyle__TableHeadStyle",componentId:"sc-1wzfyed-2"})([""," "," "," ",""],v,(function(e){return e.columnBorders&&"\n    border: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n    border-right: none;\n  ")}),(function(e){return e.columnBorders&&e.last&&"\n    border-right: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.sticky&&"\n    background-color: ".concat((e.theme||f.Z).background.panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||f.Z.borders).medium,";\n    z-index: 1;\n    position: sticky;\n    top: 0;\n\n    &:first-child {\n      left: 0;\n      z-index: 2;\n    }\n  ")})),y=p.default.td.withConfig({displayName:"indexstyle__TableDataStyle",componentId:"sc-1wzfyed-3"})([""," "," "," "," "," ",""],v,(function(e){return e.columnBorders&&"\n    border-left: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.columnBorders&&e.last&&"\n    border-right: 1px solid ".concat((e.theme.borders||f.Z.borders).light,";\n  ")}),(function(e){return e.stickyFirstColumn&&"\n    background-color: ".concat((e.theme||f.Z).background.panel,";\n    z-index: 1;\n    position: sticky;\n    left: 0;\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||f.Z.interactive).activeBorder,";\n  ")}),(function(e){return e.wrapColumns&&"\n    white-space: break-spaces;\n  "})),g=r(28598);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function O(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var x=function(e){var n=e.alignTop,r=e.borderCollapseSeparate,t=e.buildLinkProps,o=e.columnBorders,p=e.columnFlex,f=e.columnMaxWidth,b=e.columns,v=void 0===b?[]:b,j=e.compact,x=e.isSelectedRow,_=e.noBorder,Z=e.noHeader,P=e.onClickRow,k=e.rows,S=e.stickyFirstColumn,C=e.stickyHeader,B=e.uuid,E=e.wrapColumns,D=(0,i.useMemo)((function(){return p.reduce((function(e,n){return e+(n||0)}),0)}),p),H=(0,i.useCallback)((function(e){if(p[e]){var n=Math.round(p[e]/D*100);return"".concat(n,"%")}return null}),[]),I=(0,i.useMemo)((function(){return null===k||void 0===k?void 0:k.map((function(e,r){var u=null===t||void 0===t?void 0:t(r),s=e.map((function(t,c){return(0,g.jsx)(y,{alignTop:n,columnBorders:o,compact:j,last:c===e.length-1,maxWidth:null===f||void 0===f?void 0:f(c),noBorder:_,selected:null===x||void 0===x?void 0:x(r),stickyFirstColumn:S&&0===c,width:H(c),wrapColumns:E,children:t},"".concat(B,"-row-").concat(r,"-cell-").concat(c))})),a=(0,g.jsx)(h,{noHover:!(u||P),onClick:P?function(){return P(r)}:null,children:s},"".concat(B,"-row-").concat(r));return u?(0,i.createElement)(c(),O(O({},u),{},{key:"".concat(B,"-row-link-").concat(r),passHref:!0}),(0,g.jsx)(l.Z,{fullWidth:!0,noHoverUnderline:!0,noOutline:!0,style:{display:"table-row-group"},verticalAlignContent:!0,children:a})):a}))}),[n,t,H,f,v,j,x,_,P,k]);return(0,g.jsxs)(m,{borderCollapseSeparate:r,columnBorders:o,children:[(null===v||void 0===v?void 0:v.length)>=1&&!Z&&(0,g.jsx)(h,{noHover:!0,children:v.map((function(e,n){return(0,g.jsx)(w,{columnBorders:o,compact:j,last:n===v.length-1,noBorder:_,sticky:C,children:(0,g.jsxs)(u.Z,{alignItems:"center",children:[(0,g.jsx)(a.ZP,{bold:!0,leftAligned:!0,monospace:!0,muted:!0,children:e.label?e.label():e.uuid}),e.tooltipMessage&&(0,g.jsx)(s.Z,{ml:"4px",children:(0,g.jsx)(d.Z,{appearBefore:!0,label:(0,g.jsx)(a.ZP,{leftAligned:!0,children:e.tooltipMessage}),lightBackground:!0,primary:!0})})]})},"".concat(B,"-col-").concat(e.uuid,"-").concat(n))}))}),I]})}},60921:function(e,n,r){"use strict";r.r(n);var t=r(77837),o=r(82394),c=r(38860),i=r.n(c),u=r(82684),l=r(34376),s=r(60328),a=r(87372),d=r(41788),p=r(30775),f=r(86673),b=r(17903),m=r(19711),h=r(67867),v=r(82531),w=r(66166),y=r(10503),g=r(49125),j=r(79585),O=r(63153),x=r(9736),_=r(33766),Z=r(7715),P=r(59e3),k=r(28598);function S(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function C(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?S(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function B(){var e=(0,l.useRouter)(),n=((0,x.PR)()||{}).id,r=(0,u.useState)(null),t=r[0],o=r[1],c=v.ZP.users.list({},{revalidateOnFocus:!1}),i=c.data,d=c.mutate,S=(0,u.useMemo)((function(){return(null===i||void 0===i?void 0:i.users)||[]}),[i]),B=v.ZP.users.detail(null===t||void 0===t?void 0:t.user_id,{},{revalidateOnFocus:!1}),E=B.data,D=B.mutate,H=null===E||void 0===E?void 0:E.user,I=(0,P.iV)(),T=(0,w.Z)(I);(0,u.useEffect)((function(){var e=I.add_new_user,n=I.user_id;if(!(0,Z.Xy)(I,T)){var r=C(C({},T),I);n?r.user_id=n:delete r.user_id,e?r.add_new_user=e:delete r.add_new_user,o(r)}}),[I,T]);var M=null===t||void 0===t?void 0:t.add_new_user,N=(0,u.useMemo)((function(){return M?(0,k.jsx)(f.Z,{p:g.cd,children:(0,k.jsx)(h.Z,{newUser:!0,onSaveSuccess:function(){(0,_.u)({add_new_user:null,user_id:null}),d()},title:"Add new user",user:{}})}):H?(0,k.jsx)(f.Z,{p:g.cd,children:(0,k.jsx)(h.Z,{hideFields:[O.s7],onDeleteSuccess:function(){(0,_.u)({add_new_user:null,user_id:null}),d()},onSaveSuccess:function(){D(),d()},showDelete:!0,title:"Edit user",user:H})}):null}),[D,d,M,H]);return(0,k.jsxs)(p.Z,{after:N,afterHidden:!H&&!M,uuidItemSelected:j.eC,uuidWorkspaceSelected:j.WH,children:[(0,k.jsx)(f.Z,{p:g.cd,children:(0,k.jsx)(s.Z,{beforeIcon:(0,k.jsx)(y.mm,{}),onClick:function(){return(0,_.u)({add_new_user:1,user_id:null})},primary:!0,children:"Add new user"})}),(0,k.jsx)(f.Z,{p:g.cd,children:(0,k.jsx)(a.Z,{children:"Users"})}),(0,k.jsx)(b.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var n;return(null===(n=S[e])||void 0===n?void 0:n.id)===(null===H||void 0===H?void 0:H.id)},onClickRow:function(r){var t,o=null===(t=S[r])||void 0===t?void 0:t.id;o===n?e.push("/settings/account/profile"):(0,_.u)({add_new_user:null,user_id:o})},rows:S.map((function(e){var n=e.email,r=e.roles_display,t=e.username;return[(0,k.jsx)(m.ZP,{bold:!0,children:t},"username"),(0,k.jsx)(m.ZP,{default:!0,children:n},"email"),(0,k.jsx)(m.ZP,{default:!0,children:r},"roles")]})),uuid:"pipeline-runs"})]})}B.getInitialProps=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,d.Z)(B)},33766:function(e,n,r){"use strict";r.d(n,{u:function(){return a}});var t=r(75582),o=r(82394),c=r(34376),i=r.n(c),u=r(59e3);function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.replaceParams,c=r.pushHistory,l=o?{}:(0,u.iV)();n=window.location.pathname;var a=c?i().push:i().replace,d=s(s({},l),e);Object.entries(e).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],o=n[1];"undefined"!==typeof o&&null!==o||delete d[r]}));var p=(0,u.uM)(d);p.length>=1&&(p="?".concat(p));var f="".concat(n.split("?")[0]).concat(p);return a(i().router.pathname,f,{shallow:!0})}},48673:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/workspace/users",function(){return r(60921)}])}},function(e){e.O(0,[3850,9767,6579,434,9898,9140,9774,2888,179],(function(){return n=48673,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
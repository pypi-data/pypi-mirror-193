
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Program Description &#8212; AutoArchive User Manual (ver. 2.0.5)</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autoarchive.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Operations Explained" href="operations_explained.html" />
    <link rel="prev" title="AutoArchive User Manual" href="../index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="operations_explained.html" title="Operations Explained"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="AutoArchive User Manual"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">AutoArchive User Manual (ver. 2.0.5)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Program Description</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="program-description">
<h1>Program Description<a class="headerlink" href="#program-description" title="Permalink to this heading">¶</a></h1>
<p><strong>AutoArchive</strong> is a simple utility to help create backups more easily.  The idea of the program is that all essential
information for creating a single backup—such as list of directories that should be archived, the archive name,
etc.—is stored in a single file – the <a class="reference internal" href="glossary.html#term-archive-specification-file"><span class="xref std std-term">archive specification file</span></a>.  It can use <strong class="command">tar</strong> for creating archives, it
has a command line interface and supports incremental backups.</p>
<p>Archive specification files, also called “.aa files” are normally stored in a predefined location from where they are
processed by the <code class="docutils literal notranslate"><span class="pre">aa</span></code> command which results to creating of a corresponding <a class="reference internal" href="glossary.html#term-backup"><span class="xref std std-term">backup</span></a> for each.</p>
<p>Command <code class="docutils literal notranslate"><span class="pre">autoarchive</span></code> is alias for <code class="docutils literal notranslate"><span class="pre">aa</span></code>; these commands are equivalent.</p>
<section id="usage">
<span id="id1"></span><h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><strong>aa</strong> [<em>options</em>] [<em>command</em>] [<em>AA_SPEC</em> …]</div>
<div class="line"><strong>autoarchive</strong> [<em>options</em>] [<em>command</em>] [<em>AA_SPEC</em> …]</div>
</div>
<p>Most of the options can be specified also in <em>configuration files</em> and in the <a class="reference internal" href="glossary.html#term-archive-specification-file"><span class="xref std std-term">archive specification file</span></a> (by using
the long option form and leaving out leading dashes) – see <a class="reference internal" href="config_file.html#config-file"><span class="std std-ref">Configuration File</span></a> and <a class="reference internal" href="arch_spec.html#arch-spec"><span class="std std-ref">Archive Specification File</span></a> for complete list of options that
can be specified there.  Command line options has higher priority than options in configuration files but lower
priority than the ones in the archive specification file.  <code class="docutils literal notranslate"><span class="pre">--force-*</span></code> options are available for the purpose of
overriding some of the options specified in the <a class="reference internal" href="glossary.html#term-.aa-file"><span class="xref std std-term">.aa file</span></a>.</p>
<p>Boolean options can also have a negation form defined.  It has the “no-” prefix before the option name.  For example:
<code class="docutils literal notranslate"><span class="pre">--incremental</span></code> vs. <code class="docutils literal notranslate"><span class="pre">--no-incremental</span></code>.  The negation form has always higher priority than the normal form.</p>
<p><strong>List of command line options</strong></p>
<blockquote>
<div><p><strong>Arguments:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">AA_SPEC</span></code></dt><dd><p>Archive specification.  It determines the <a class="reference internal" href="glossary.html#term-archive-specification-file"><span class="xref std std-term">archive specification file</span></a> that shall be processed.  None,
single or multiple <em>AA_SPEC</em> arguments are allowed.  If option <code class="docutils literal notranslate"><span class="pre">--all</span></code> or command <code class="docutils literal notranslate"><span class="pre">--list</span></code> is
specified then no <em>AA_SPEC</em> argument is required.  Otherwise at least single <em>AA_SPEC</em> argument is
required.  If it contains the “.aa” extension then it is taken as the path to an archive specification
file.  Otherwise, if specified without the extension, the corresponding <a class="reference internal" href="glossary.html#term-.aa-file"><span class="xref std std-term">.aa file</span></a> is searched in the
<a class="reference internal" href="glossary.html#term-archive-specifications-directory"><span class="xref std std-term">archive specifications directory</span></a>.</p>
</dd>
</dl>
<p><strong>Commands:</strong></p>
<p>Commands for program’s operations.  The default operation is the <a class="reference internal" href="glossary.html#term-backup"><span class="xref std std-term">backup</span></a> creation if no command is specified.</p>
<dl class="option-list">
<dt><kbd><span class="option">--list</span></kbd></dt>
<dd><p>Show <a class="reference internal" href="glossary.html#term-configured-archive"><span class="xref std std-term">configured</span></a> and <a class="reference internal" href="glossary.html#term-orphaned-archive"><span class="xref std std-term">orphaned archives</span></a>.</p>
</dd>
<dt><kbd><span class="option">--purge</span></kbd></dt>
<dd><p>Purge stored data for an orphaned archive.</p>
</dd>
<dt><kbd><span class="option">--version</span></kbd></dt>
<dd><p>Show program’s version number and exit.</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>Show this help message and exit.</p>
</dd>
</dl>
<p><strong>Archiving options:</strong></p>
<dl class="option-list">
<dt><kbd><span class="option">-a <var>ARCHIVER</var></span>, <span class="option">--archiver=<var>ARCHIVER</var></span></kbd></dt>
<dd><p>Specify archiver type.  Supported types are: ‘tar’, ‘targz’, ‘tarbz2’, ‘tarxz’, ‘tarzst’, ‘tar_internal’,
‘targz_internal’, ‘tarbz2_internal’ (default: targz).</p>
</dd>
<dt><kbd><span class="option">-c <var>NUM</var></span>, <span class="option">--compression-level=<var>NUM</var></span></kbd></dt>
<dd><p>Compression strength level.  If not specified, default behaviour of underlying compression program will be used.
Valid range is from 0 to 9.</p>
</dd>
<dt><kbd><span class="option">-d <var>DIR_PATH</var></span>, <span class="option">--dest-dir=<var>DIR_PATH</var></span></kbd></dt>
<dd><p>Directory where the <a class="reference internal" href="glossary.html#term-backup"><span class="xref std std-term">backup</span></a> will be created (default: &lt;current directory&gt;).</p>
</dd>
<dt><kbd><span class="option">--overwrite-at-start</span></kbd></dt>
<dd><p>If enabled, backups are overwritten at the start of creation.  If disabled (default), backups are overwritten
at the end of creation.  Enabling this option can be useful with big backups and low free space on the backup
volume.</p>
<p>Let’s say <code class="docutils literal notranslate"><span class="pre">aa</span> <span class="pre">data</span></code> command will create backup /backups/data.tar.gz.  If a file with the same name already
exists in /backups then – in case this option is enabled – it will be overwritten as soon as creation of the
new backup starts.  If the option is not enabled the new backup will be first created under a temporary name
leaving the old backup untouched.  After the new backup is fully created it is renamed to /backups/data.tar.gz
overwriting the old one.</p>
</dd>
</dl>
<p><strong>Incremental archiving options:</strong></p>
<dl class="option-list">
<dt><kbd><span class="option">-i</span>, <span class="option">--incremental</span></kbd></dt>
<dd><p>Perform incremental backup.</p>
</dd>
<dt><kbd><span class="option">-l <var>LEVEL</var></span>, <span class="option">--level=<var>LEVEL</var></span></kbd></dt>
<dd><p>Specify backup level which should be created.  All information about higher levels—if any exists—will be
erased.  If not present, the next level in a row will be created.</p>
</dd>
<dt><kbd><span class="option">--restarting</span></kbd></dt>
<dd><p>Turn on backup level restarting.  See other <code class="docutils literal notranslate"><span class="pre">*restart-*</span></code> options to configure the restarting behaviour.</p>
</dd>
<dt><kbd><span class="option">--restart-after-level=<var>LEVEL</var></span></kbd></dt>
<dd><p>Maximal backup level.  If reached, it will be restarted back to a lower level (which is typically level 1 but it
depends on <code class="docutils literal notranslate"><span class="pre">--max-restart-level-size</span></code>) (default: 10).</p>
</dd>
<dt><kbd><span class="option">--restart-after-age=<var>DAYS</var></span></kbd></dt>
<dd><p>Number of days after which the backup level is restarted.  Similarly to <code class="docutils literal notranslate"><span class="pre">--restart-after-level</span></code> it will be
restarted to level 1 or higher.</p>
</dd>
<dt><kbd><span class="option">--full-restart-after-count=<var>COUNT</var></span></kbd></dt>
<dd><p>Number of backup level restarts after which the level is restarted to 0.</p>
</dd>
<dt><kbd><span class="option">--full-restart-after-age=<var>DAYS</var></span></kbd></dt>
<dd><p>Number of days after which the backup level is restarted to 0.</p>
</dd>
<dt><kbd><span class="option">--max-restart-level-size=<var>PERCENTAGE</var></span></kbd></dt>
<dd><p>Maximal percentage size of a <a class="reference internal" href="glossary.html#term-backup"><span class="xref std std-term">backup</span></a> (of level &gt; 0) to which level is allowed restart to.  The size is
percentage of size of the level 0 backup file.  If a backup of particular level has its size bigger than
defined percentage, restart to that level will not be allowed.</p>
</dd>
<dt><kbd><span class="option">--remove-obsolete-backups</span></kbd></dt>
<dd><p>Turn on removing backups of levels that are no longer valid due to the backup level restart.  All backups of
the backup level higher than the one currently being created will be removed.</p>
</dd>
</dl>
<p><strong>Options for keeping old backups</strong></p>
<dl class="option-list">
<dt><kbd><span class="option">-k</span>, <span class="option">--keep-old-backups</span></kbd></dt>
<dd><p>Turn on backup keeping.  When a <a class="reference internal" href="glossary.html#term-backup"><span class="xref std std-term">backup</span></a> is about to be overwritten, it is renamed instead.  If <code class="docutils literal notranslate"><span class="pre">--incremental</span></code>
is enabled it applies to all corresponding <a class="reference internal" href="glossary.html#term-increment"><span class="xref std std-term">increments</span></a>.  The new name is created by inserting a
<a class="reference internal" href="glossary.html#term-keeping-ID"><span class="xref std std-term">keeping ID</span></a> in front of backup file(s) extension.  The keeping ID is a string from interval ‘aa’, ‘ab’, …,
‘zy’, ‘zz’ where ‘aa’ represents most recent kept backup.</p>
</dd>
<dt><kbd><span class="option">--number-of-old-backups=<var>NUM</var></span></kbd></dt>
<dd><p>Number of old backups to keep when <code class="docutils literal notranslate"><span class="pre">--keep-old-backups</span></code> is enabled (default: 1).</p>
</dd>
</dl>
<p><strong>Command execution options</strong></p>
<dl class="option-list">
<dt><kbd><span class="option">--command-before-all-backups=<var>COMMAND_BEFORE_ALL</var></span></kbd></dt>
<dd><p>Arbitrary command that will be executed before backup creation for the set of selected archives.  The command
will be executed only once in a single invocation of <strong>AutoArchive</strong>.</p>
</dd>
<dt><kbd><span class="option">--command-after-all-backups=<var>COMMAND_AFTER_ALL</var></span></kbd></dt>
<dd><p>Arbitrary command that will be executed after backup creation for the set of selected archives.  The command
will be executed only once in a single invocation of <strong>AutoArchive</strong>.</p>
</dd>
<dt><kbd><span class="option">--command-before-backup=<var>COMMAND_BEFORE</var></span></kbd></dt>
<dd><p>Arbitrary command to execute prior to each backup creation.</p>
</dd>
<dt><kbd><span class="option">--command-after-backup=<var>COMMAND_AFTER</var></span></kbd></dt>
<dd><p>Arbitrary command to execute after each backup creation.</p>
</dd>
</dl>
<p>Format of <em>COMMAND_*</em> arguments is:</p>
<blockquote>
<div><p><em>command</em> [<em>arguments</em>]</p>
</div></blockquote>
<p>If <em>arguments</em> are specified then the whole expression should be enclosed in quotes.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">command</span><span class="o">-</span><span class="n">before</span><span class="o">-</span><span class="n">backup</span><span class="o">=</span><span class="s2">&quot;foo arg1&quot;</span>
</pre></div>
</div>
<p>Additionally if an argument contains spaces it should be enclosed as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">command</span><span class="o">-</span><span class="n">after</span><span class="o">-</span><span class="n">backup</span><span class="o">=</span><span class="s2">&quot;foo arg1 &#39;arg with spaces 2&#39; arg3&quot;</span>
</pre></div>
</div>
<p><strong>General options:</strong></p>
<dl class="option-list">
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>Turn on verbose output.</p>
</dd>
<dt><kbd><span class="option">-q</span>, <span class="option">--quiet</span></kbd></dt>
<dd><p>Turn on quiet output.  Only errors will be shown.  If <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> is turned on at the same level as
<code class="docutils literal notranslate"><span class="pre">--verbose</span></code> (e. g. both are specified on the command line) then <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> has higher priority than
<code class="docutils literal notranslate"><span class="pre">--verbose</span></code>.</p>
</dd>
<dt><kbd><span class="option">--all</span></kbd></dt>
<dd><p>Operate on all <a class="reference internal" href="glossary.html#term-configured-archive"><span class="xref std std-term">configured archives</span></a> (additional to those specified as <code class="docutils literal notranslate"><span class="pre">AA_SPEC</span></code>
arguments).  Default for <code class="docutils literal notranslate"><span class="pre">--list</span></code> if no <code class="docutils literal notranslate"><span class="pre">AA_SPEC</span></code> is specified.  See also <code class="docutils literal notranslate"><span class="pre">--archive-specs-dir</span></code>.</p>
</dd>
<dt><kbd><span class="option">--archive-specs-dir=<var>DIR_PATH</var></span></kbd></dt>
<dd><p>Directory where <a class="reference internal" href="glossary.html#term-archive-specification-file"><span class="xref std std-term">archive specification files</span></a> will be searched for (default:
~/.config/aa/archive_specs).</p>
</dd>
<dt><kbd><span class="option">--user-config-file=<var>FILE_PATH</var></span></kbd></dt>
<dd><p>Alternate user configuration file (default: ~/.config/aa/aa.conf).</p>
</dd>
<dt><kbd><span class="option">--user-config-dir=<var>DIR_PATH</var></span></kbd></dt>
<dd><p>Alternate user configuration directory (default: ~/.config/aa).</p>
</dd>
</dl>
<p><strong>Force options:</strong></p>
<p>Options to override standard options defined in archive specification files.</p>
<dl class="option-list">
<dt><kbd><span class="option">--force-archiver=<var>ARCHIVER</var></span></kbd></dt>
<dd><p>Force archiver type.  See <code class="docutils literal notranslate"><span class="pre">--archiver</span></code> option for supported types.</p>
</dd>
<dt><kbd><span class="option">--force-incremental</span></kbd></dt>
<dd><p>Force incremental backup.</p>
</dd>
<dt><kbd><span class="option">--force-restarting</span></kbd></dt>
<dd><p>Force backup level restarting.</p>
</dd>
<dt><kbd><span class="option">--force-compression-level=<var>NUM</var></span></kbd></dt>
<dd><p>Force compression strength level.</p>
</dd>
<dt><kbd><span class="option">--force-dest-dir=<var>DIR_PATH</var></span></kbd></dt>
<dd><p>Force the directory where the backup will be created.</p>
</dd>
<dt><kbd><span class="option">--force-command-before-backup=<var>COMMAND_BEFORE</var></span></kbd></dt>
<dd><p>Force configuration of the command to execute prior to each backup creation.</p>
</dd>
<dt><kbd><span class="option">--force-command-after-backup=<var>COMMAND_AFTER</var></span></kbd></dt>
<dd><p>Force configuration of the command to execute after each backup creation.</p>
</dd>
<dt><kbd><span class="option">--force-overwrite-at-start</span></kbd></dt>
<dd><p>Force backup overwriting behavior.</p>
</dd>
</dl>
<p><strong>Negation options:</strong></p>
<p>Negative variants of standard boolean options.</p>
<dl class="option-list">
<dt><kbd><span class="option">--no-incremental</span></kbd></dt>
<dd><p>Disable incremental backup.</p>
</dd>
<dt><kbd><span class="option">--no-restarting</span></kbd></dt>
<dd><p>Turn off backup level restarting.</p>
</dd>
<dt><kbd><span class="option">--no-remove-obsolete-backups</span></kbd></dt>
<dd><p>Turn off obsolete backups removing.</p>
</dd>
<dt><kbd><span class="option">--no-keep-old-backups</span></kbd></dt>
<dd><p>Turn off backup keeping.</p>
</dd>
<dt><kbd><span class="option">--no-all</span></kbd></dt>
<dd><p>Do not operate on all <a class="reference internal" href="glossary.html#term-configured-archive"><span class="xref std std-term">configured archives</span></a>.</p>
</dd>
<dt><kbd><span class="option">--no-overwrite-at-start</span></kbd></dt>
<dd><p>Do not overwrite backup at the start of creation.  Overwrite after the new backup is created.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="exit-codes">
<h2>Exit Codes<a class="headerlink" href="#exit-codes" title="Permalink to this heading">¶</a></h2>
<p>AutoArchive can return following exit codes:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: The operation finished successfully.</p></li>
<li><p>1: The operation finished with minor (warnings) or major (errors) issues.</p></li>
</ul>
</div></blockquote>
</section>
<section id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt><em>~/.config/aa/aa.conf</em></dt><dd><p>User configuration file.  See <a class="reference internal" href="config_file.html#config-file"><span class="std std-ref">Configuration File</span></a> for its description.</p>
</dd>
<dt><em>~/.config/aa/archive_specs/</em></dt><dd><p>Default directory that contains <a class="reference internal" href="glossary.html#term-archive-specification-file"><span class="xref std std-term">archive specification files</span></a>.  See <a class="reference internal" href="arch_spec.html#arch-spec"><span class="std std-ref">Archive Specification File</span></a> for
description of the <a class="reference internal" href="glossary.html#term-.aa-file"><span class="xref std std-term">.aa file</span></a> format.</p>
</dd>
<dt><em>~/.config/aa/snapshots/*.snar</em></dt><dd><p>Files that stores information about incremental backup.  They are created by <strong>GNU tar</strong> archiver.</p>
</dd>
<dt><em>~/.config/aa/storage/*.realm</em></dt><dd><p>Application internal persistent storage.  It stores various data needed to be preserved between program runs.  For
example: last backup level restart, number of backup level restart, etc.</p>
</dd>
<dt><em>/etc/aa/aa.conf</em></dt><dd><p>System configuration file.  See <a class="reference internal" href="config_file.html#config-file"><span class="std std-ref">Configuration File</span></a> for its description.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="operations_explained.html" title="Operations Explained"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="AutoArchive User Manual"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">AutoArchive User Manual (ver. 2.0.5)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Program Description</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2003 - 2023, Robert Cernansky.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>
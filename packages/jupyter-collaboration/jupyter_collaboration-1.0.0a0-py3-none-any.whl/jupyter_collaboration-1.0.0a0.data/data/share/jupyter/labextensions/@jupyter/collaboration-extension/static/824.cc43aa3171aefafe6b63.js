"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[824,151],{4151:(e,t,s)=>{s.r(t),s.d(t,{AwarenessMock:()=>o,CollaboratorsBody:()=>g,CollaboratorsPanel:()=>f,IGlobalAwareness:()=>n,IUserMenu:()=>a,RendererUserMenu:()=>u,UserInfoBody:()=>b,UserInfoPanel:()=>m,UserMenu:()=>h});var r=s(1531);const a=new r.Token("@jupyter/collaboration:IUserMenu"),n=new r.Token("@jupyter/collaboration:IGlobalAwareness");class o{constructor(e){this.states=new Map,this.meta=new Map,this.doc=e,this.clientID=e.clientID}setLocalState(e){}setLocalStateField(e,t){}getLocalState(){return null}getStates(){return this.states}on(e,t){}off(e,t){}once(e,t){}emit(e,t){}destroy(){}}var i=s(136),l=s(3690),c=s(5527);class u extends l.MenuBar.Renderer{constructor(e){super(),this._user=e}renderItem(e){const t=this.createItemClass(e),s=this.createItemDataset(e),r=this.createItemARIA(e);return c.h.li({className:t,dataset:s,tabindex:"0",onfocus:e.onfocus,...r},this._createUserIcon(),this.renderLabel(e),this.renderIcon(e))}renderLabel(e){const t=this.formatLabel(e);return c.h.div({className:"lm-MenuBar-itemLabel jp-MenuBar-label"},t)}_createUserIcon(){return this._user.isReady&&this._user.identity.avatar_url?c.h.div({className:"lm-MenuBar-itemIcon jp-MenuBar-imageIcon"},c.h.img({src:this._user.identity.avatar_url})):this._user.isReady?c.h.div({className:"lm-MenuBar-itemIcon jp-MenuBar-anonymousIcon",style:{backgroundColor:this._user.identity.color}},c.h.span({},this._user.identity.initials)):c.h.div({className:"lm-MenuBar-itemIcon jp-MenuBar-anonymousIcon"},i.userIcon)}}class h extends l.Menu{constructor(e){super(e)}}var d=s(8029),_=s(6029);const p=e=>{const{user:t}=e;return _.createElement("div",{className:"jp-UserInfo-Container"},_.createElement("div",{title:t.display_name,className:"jp-UserInfo-Icon",style:{backgroundColor:t.color}},_.createElement("span",null,t.initials)),_.createElement("h3",null,t.display_name))};class m extends l.Panel{constructor(e){super({}),this.addClass("jp-UserInfoPanel"),this._profile=e,this._body=null,this._profile.isReady?(this._body=new b(this._profile.identity),this.addWidget(this._body),this.update()):this._profile.ready.then((()=>{this._body=new b(this._profile.identity),this.addWidget(this._body),this.update()})).catch((e=>console.error(e)))}}class b extends d.ReactWidget{constructor(e){super(),this._user=e}get user(){return this._user}set user(e){this._user=e,this.update()}render(){return _.createElement(p,{user:this._user})}}var y=s(7502);const I="jp-Collaborator";class f extends l.Panel{constructor(e,t,s){super({}),this._onAwarenessChanged=()=>{const e=this._awareness.getStates(),t=[];e.forEach(((e,s)=>{this._currentUser.isReady&&e.user.name!==this._currentUser.identity.name&&t.push(e)})),this._body.collaborators=t},this._awareness=t,this._currentUser=e,this._body=new g(s),this.addWidget(this._body),this.update(),this._awareness.on("change",this._onAwarenessChanged)}}class g extends d.ReactWidget{constructor(e){super(),this._collaborators=[],this._fileopener=e,this.addClass("jp-CollaboratorsList")}get collaborators(){return this._collaborators}set collaborators(e){this._collaborators=e,this.update()}render(){return this._collaborators.map(((e,t)=>{let s=!1,r="",a="",n="";e.current&&(s=!0,n=e.current.split(":")[1],r=y.PathExt.basename(n),r=r.length>25?r.slice(0,12).concat("…"):r,a="•");const o=`${e.user.display_name} ${a} ${r}`;return _.createElement("div",{className:s?`jp-ClickableCollaborator ${I}`:I,key:t,onClick:()=>{s&&this._fileopener(n)}},_.createElement("div",{className:"jp-CollaboratorIcon",style:{backgroundColor:e.user.color}},_.createElement("span",null,e.user.initials)),_.createElement("span",null,o))}))}}}}]);
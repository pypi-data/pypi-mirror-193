"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[497],{9497:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var o,a=t(9528),n=t(4982),s=t(8960);!function(e){e.openPath="filebrowser:open-path"}(o||(o={}));const i={id:"@jupyter/collaboration-extension:defaultFileBrowser",provides:n.IDefaultFileBrowser,requires:[n.IFileBrowserFactory],optional:[a.IRouter,a.JupyterFrontEnd.ITreeResolver,a.ILabShell],activate:async(e,r,t,o,a)=>{console.debug("@jupyter/collaboration-extension:defaultFileBrowser: activated");const{commands:n}=e,i=new s.YDrive(e.serviceManager.user);e.serviceManager.contents.addDrive(i);const c=r.createFileBrowser("filebrowser",{auto:!1,restore:!1,driveName:"YDrive"});return l.restoreBrowser(c,n,t,o,a),c}};var l;!function(e){e.restoreBrowser=async function(e,r,t,a,n){const s="jp-mod-restoring";if(e.addClass(s),!t)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(s);const i=async()=>{t.routed.disconnect(i);const l=await(null==a?void 0:a.paths);(null==l?void 0:l.file)||(null==l?void 0:l.browser)?(await e.model.restore(e.id,!1),l.file&&await r.execute(o.openPath,{path:l.file,dontShowBrowser:!0}),l.browser&&await r.execute(o.openPath,{path:l.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(s),(null==n?void 0:n.isEmpty("main"))&&r.execute("launcher:create")};t.routed.connect(i)}}(l||(l={}));var c=t(8029),d=t(6352),u=t(136),w=t(3690),p=t(7502),v=t(8932),b=t(4161),h=t(4),m=t(981),f=t(6493),y=t(7099);const g=[i,{id:"@jupyter/collaboration-extension:userMenu",autoStart:!0,requires:[],provides:d.IUserMenu,activate:e=>{const{commands:r}=e,{user:t}=e.serviceManager;return new d.UserMenu({commands:r,user:t})}},{id:"@jupyter/collaboration-extension:userMenuBar",autoStart:!0,requires:[d.IUserMenu],activate:async(e,r)=>{const{shell:t}=e,{user:o}=e.serviceManager,a=new w.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new d.RendererUserMenu(o)});a.id="jp-UserMenu",o.userChanged.connect((()=>a.update())),a.addMenu(r),t.add(a,"top",{rank:1e3})}},{id:"@jupyter/collaboration-extension:rtcGlobalAwareness",autoStart:!0,requires:[b.IStateDB],provides:d.IGlobalAwareness,activate:(e,r)=>{const{user:t}=e.serviceManager,o=new m.Doc,a=new f.GL(o),n=v.ServerConnection.makeSettings(),s=p.URLExt.join(n.wsUrl,"api/yjs");new y.WebsocketProvider(s,"JupyterLab:globalAwareness",o,{awareness:a});const i=()=>{a.setLocalStateField("user",t.identity)};return t.isReady&&i(),t.ready.then(i).catch((e=>console.error(e))),t.userChanged.connect(i),r.changed.connect((async()=>{var e,t;const o=(null===(t=null===(e=(await r.toJSON())["layout-restorer:data"])||void 0===e?void 0:e.main)||void 0===t?void 0:t.current)||"";o.startsWith("editor")||o.startsWith("notebook")?a.setLocalStateField("current",o):a.setLocalStateField("current",null)})),a}},{id:"@jupyter/collaboration-extension:rtcPanel",autoStart:!0,requires:[d.IGlobalAwareness,h.ITranslator],activate:(e,r,t)=>{const{user:o}=e.serviceManager,a=t.load("jupyter_collaboration"),n=new u.SidePanel;n.id=c.DOMUtils.createDomID(),n.title.icon=u.usersIcon,n.title.caption=a.__("Collaboration"),n.addClass("jp-RTCPanel"),e.shell.add(n,"left",{rank:300});const s=new d.UserInfoPanel(o);s.title.label=a.__("User info"),s.title.caption=a.__("User information"),n.addWidget(s);const i=new d.CollaboratorsPanel(o,r,(r=>{e.commands.execute("docmanager:open",{path:r})}));i.title.label=a.__("Online Collaborators"),n.addWidget(i)}}]}}]);